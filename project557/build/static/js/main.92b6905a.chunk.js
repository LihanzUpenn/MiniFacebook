(this.webpackJsonpproject557=this.webpackJsonpproject557||[]).push([[0],{132:function(e,t,n){"use strict";var a=n(24),s=n(135),r=n(1),c=n(0),o=n(255),i=n(256),l=n.n(i),d=n(175),u=n.n(d),m=n(136);var h=function(e){return Object(r.jsxs)("div",{children:[0===e.time.h?"":Object(r.jsx)("span",{children:e.time.h>=10?e.time.h:"0".concat(e.time.h)}),"\xa0\xa0",Object(r.jsx)("span",{children:e.time.m>=10?e.time.m:"0".concat(e.time.m)}),"\xa0:\xa0",Object(r.jsx)("span",{children:e.time.s>=10?e.time.s:"0".concat(e.time.s)}),"\xa0:\xa0",Object(r.jsx)("span",{children:e.time.ms>=10?e.time.ms:"0".concat(e.time.ms)})]})},g=n.p+"static/media/one_piece_phone.ecb3b48f.mp3";function b(){var e=Object(s.a)(["\n  border: 1px solid blue;\n  width: 200px;\n  height: 150px;\n"]);return b=function(){return e},e}function j(){var e=Object(s.a)(["\n  display: flex;\n  width: 100%;\n"]);return j=function(){return e},e}function p(){var e=Object(s.a)(["\n  height: 50vh;\n  width: 50%;\n  display: flex;\n  flex-direction: column;\n"]);return p=function(){return e},e}var f=m.a.div(p()),v=m.a.div(j()),O=m.a.video(b());t.a=function(e){var t=Object(c.useState)(""),n=Object(a.a)(t,2),s=n[0],i=n[1],d=Object(c.useState)(""),m=Object(a.a)(d,2),b=m[0],j=m[1],p=Object(c.useState)({}),x=Object(a.a)(p,2),y=x[0],S=x[1],w=Object(c.useState)(),C=Object(a.a)(w,2),k=C[0],B=C[1],I=Object(c.useState)("none"),_=Object(a.a)(I,2),N=_[0],D=_[1],E=Object(c.useState)(!1),L=Object(a.a)(E,2),P=L[0],T=L[1],A=Object(c.useState)(""),M=Object(a.a)(A,2),R=M[0],U=M[1],F=Object(c.useState)(),H=Object(a.a)(F,2),V=H[0],z=H[1],J=Object(c.useState)(!1),K=Object(a.a)(J,2),G=K[0],Y=K[1],W=Object(c.useState)(!1),q=Object(a.a)(W,2),X=(q[0],q[1],Object(c.useState)(!0)),Z=Object(a.a)(X,2),Q=(Z[0],Z[1],Object(c.useState)("")),$=Object(a.a)(Q,2),ee=($[0],$[1],Object(c.useRef)()),te=Object(c.useRef)(),ne=Object(c.useRef)(),ae=Object(c.useState)({ms:0,s:0,m:0,h:0}),se=Object(a.a)(ae,2),re=se[0],ce=se[1],oe=Object(c.useState)(),ie=Object(a.a)(oe,2),le=ie[0],de=ie[1],ue=Object(c.useState)(0),me=Object(a.a)(ue,2),he=(me[0],me[1]),ge=function(){clearInterval(le),ve(),he(1),de(setInterval(ve,10))},be=re.ms,je=re.s,pe=re.m,fe=re.h,ve=function(){return 60===pe&&(fe++,pe=0),60===je&&(pe++,je=0),100===be&&(je++,be=0),be++,ce({ms:be,s:je,m:pe,h:fe})};Object(c.useEffect)((function(){ne.current=l.a.connect("/",{query:"loggeduser=".concat(e.username)}),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){B(e),ee.current&&(ee.current.srcObject=e)})),ne.current.on("yourID",(function(e){i(e)})),ne.current.on("allUsers",(function(e){S(e)})),ne.current.on("hey",(function(e){T(!0),U(e.from),z(e.signal),de(setInterval(Se,3e3))}))}),[]);var Oe,xe,ye,Se=function(){var e=g;new o.Howl({src:e,html5:!0}).play()};return k&&(Oe=Object(r.jsx)(O,{playsInline:!0,muted:!0,ref:ee,autoPlay:!0})),G&&(xe=Object(r.jsx)(O,{playsInline:!0,ref:te,autoPlay:!0})),P&&(document.getElementById("incomingCall")&&(document.getElementById("incomingCall").style.display="inline"),console.log(y[R]),ye=Object(r.jsxs)("div",{children:[Object(r.jsxs)("h1",{id:"callLabel",children:[" ",y[R]," is calling you"]}),Object(r.jsx)("button",{type:"submit",onClick:function(){document.getElementById("acceptButton").style.display="none",document.getElementById("declineButton").style.display="none",document.getElementById("callLabel").style.display="none",document.getElementById("message").innerHTML="",ge(),S({}),D("inline"),Y(!0);var t=new u.a({initiator:!1,trickle:!1,stream:k});t.on("signal",(function(e){ne.current.emit("acceptCall",{signal:e,to:R})})),t.on("stream",(function(e){te.current.srcObject=e})),t.signal(V),ne.current.on("CallendbyCaller",(function(t){console.log("lalala"),console.log("singal"),D("none"),e.endDisplayVideo(),ne.current.emit("disconnected",{id1:s,id2:b})}))},id:"acceptButton",children:"Accept"}),Object(r.jsx)("button",{type:"submit",onClick:function(){clearInterval(le),console.log("decline"),ne.current.emit("declineCall",{signal:"data",to:R}),document.getElementById("incomingCall").style.display="none",T(!1)},id:"declineButton",children:"Decline"})]})),Object(r.jsxs)(f,{children:[Object(r.jsxs)(v,{id:"videoes",children:[Oe,xe,Object(r.jsx)("button",{type:"submit",onClick:function(){ne.current.emit("disconnected",{id1:s,id2:b}),D("none"),ne.current.emit("endCall",{signal:"data",to:R}),ne.current.emit("callerEndCall",{signal:"data",to:b}),e.endDisplayVideo()},id:"endCallbutton",style:{display:N},children:"End Call"}),Object(r.jsx)("p",{id:"message"})]}),Object(r.jsx)(v,{children:Object.keys(y).map((function(t){return console.log(e.friend),t===s||y[t]!==e.friend?null:Object(r.jsxs)("button",{onClick:function(){return function(t){j(t),document.getElementById("message").innerHTML="";var n=new u.a({initiator:!0,trickle:!1,config:{iceServers:[{urls:"stun:numb.viagenie.ca",username:"sultan1640@gmail.com",credential:"98376683"},{urls:"turn:numb.viagenie.ca",username:"sultan1640@gmail.com",credential:"98376683"}]},stream:k});n.on("signal",(function(e){ne.current.emit("callUser",{userToCall:t,signalData:e,from:s})})),n.on("stream",(function(e){te.current&&(te.current.srcObject=e)})),ne.current.on("callAccepted",(function(e){ge(),S({}),Y(!0),D("inline"),n.signal(e)})),ne.current.on("callDeclinedbyReceiver",(function(e){document.getElementById("message").innerHTML="Call is rejected"})),ne.current.on("Callend",(function(t){console.log("lalala"),console.log("singal"),D("none"),e.endDisplayVideo(),ne.current.emit("disconnected",{id1:s,id2:b})}))}(t)},children:["Call ",y[t]]})}))}),Object(r.jsx)(v,{id:"incomingCall",children:ye}),Object(r.jsx)(v,{children:Object(r.jsx)("button",{type:"submit",onClick:function(){ne.current.emit("disconnected",{id1:s,id2:b}),e.endDisplayVideo()},id:"endCallbutton",children:"Go Back"})}),Object(r.jsx)(v,{children:Object(r.jsx)(h,{time:re})})]})}},20:function(e,t,n){"use strict";n.d(t,"l",(function(){return o})),n.d(t,"p",(function(){return i})),n.d(t,"o",(function(){return l})),n.d(t,"n",(function(){return d})),n.d(t,"q",(function(){return u})),n.d(t,"i",(function(){return m})),n.d(t,"m",(function(){return h})),n.d(t,"j",(function(){return g})),n.d(t,"h",(function(){return b})),n.d(t,"k",(function(){return j})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"f",(function(){return v})),n.d(t,"r",(function(){return O})),n.d(t,"g",(function(){return x})),n.d(t,"e",(function(){return y})),n.d(t,"c",(function(){return S})),n.d(t,"b",(function(){return w}));var a=n(7),s=n.n(a),r=n(19),c=n(428),o=function(){var e=Object(r.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.length>0)){e.next=7;break}return n="username=".concat(t),e.next=5,c.post("http://localhost:8080/checkin",n);case 5:return a=e.sent,e.abrupt("return",a.data.token);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:return e.abrupt("return","");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(r.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="to=".concat(n,"&from=").concat(t,"&message=").concat(a),e.next=3,c.post("http://localhost:8080/message",r);case 3:return o=e.sent,e.abrupt("return",o.data.message);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),l=function(){var e=Object(r.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("from",t),r.append("to",n),r.append("file",a),e.next=6,c.post("http://localhost:8080/image",r);case 6:return o=e.sent,e.abrupt("return",o.data.message);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),d=function(){var e=Object(r.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("from",t),r.append("to",n),r.append("file",a),e.next=6,c.post("http://localhost:8080/audio",r);case 6:return o=e.sent,e.abrupt("return",o.data.message);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),u=function(){var e=Object(r.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("from",t),r.append("to",n),r.append("file",a),e.next=6,c.post("http://localhost:8080/video",r);case 6:return o=e.sent,e.abrupt("return",o.data.message);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(r.a)(s.a.mark((function e(t,n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={from:t,to:n},e.next=3,c.get("http://localhost:8080/messagetest/".concat(JSON.stringify(a)));case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(r.a)(s.a.mark((function e(t,n,a){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("from",t),r.append("text",n),r.append("file",a),console.log(a),e.next=7,c.post("http://localhost:8080/poststory",r);case 7:return o=e.sent,e.abrupt("return",o.data.message);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(r.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getStory"),console.log(t),e.next=4,c.get("http://localhost:8080/getstory/".concat(t));case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(r.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getFriends"),console.log(t),e.next=4,c.get("http://localhost:8080/getfriends/".concat(t));case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(r.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getStrangers"),console.log(t),e.next=4,c.get("http://localhost:8080/getstrangers/".concat(t));case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(r.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleteFriend"),console.log(t),console.log(n),e.next=5,c.delete("http://localhost:8080/deletefriend",{data:{username:t,friend:n}});case 5:return a=e.sent,e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(r.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("addFriend"),console.log(t),console.log(n),e.next=5,c.get("http://localhost:8080/addfriend/".concat(t,"&").concat(n));case 5:return a=e.sent,e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(r.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleteFriend"),console.log(t),e.next=4,c.delete("http://localhost:8080/deleteuser",{data:{username:t}});case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(r.a)(s.a.mark((function e(t,n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("updatePassword"),console.log(t),a="username=".concat(t,"&newPassword=").concat(n),e.next=5,c.post("http://localhost:8080/updatepassword",a);case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(r.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getAtUser".concat(t)),e.next=3,c.get("http://localhost:8080/exist/".concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(r.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/deletemessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mid:t})}).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(r.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/deletecurrentmessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rawTime:t})}).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(r.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("xxxxxxxx"),e.next=3,fetch("http://localhost:8080/deleteconversation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:t,to:n})}).catch((function(){}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},245:function(e,t,n){"use strict";(function(e){var a=n(14),s=n(15),r=n(8),c=n(17),o=n(16),i=n(1),l=n(0),d=n(60),u=n(273),m=n(246),h=n(247),g=n(254),b=n(20),j=n(132),p=function(t){Object(c.a)(l,t);var n=Object(o.a)(l);function l(e){var t;return Object(a.a)(this,l),(t=n.call(this,e)).state={contacters:[],strangers:[],search:"",searchStranger:"",chat:[],videoCall:[],friend:[]},t.MessageSomeone=t.MessageSomeone.bind(Object(r.a)(t)),t.handleInputonChange=t.handleInputonChange.bind(Object(r.a)(t)),t.handleInputonChangeStranger=t.handleInputonChangeStranger.bind(Object(r.a)(t)),t.AddStangers=t.AddStangers.bind(Object(r.a)(t)),t.deleteFriend=t.deleteFriend.bind(Object(r.a)(t)),t.displayVideo=t.displayVideo.bind(Object(r.a)(t)),t.endDisplayVideo=t.endDisplayVideo.bind(Object(r.a)(t)),t}return Object(s.a)(l,[{key:"componentDidMount",value:function(){var e=this;document.getElementById("logox").setAttribute("style","margin-left: 100px"),console.log("Curr user ".concat(localStorage.getItem("currentUser"))),console.log("Curr Password ".concat(localStorage.getItem("password")));var t=[],n=[];Object(b.h)(localStorage.getItem("currentUser")).then((function(a){console.log(a);for(var s=0;s<a.length;s+=1)t.push(a[s].friend);console.log(t),e.setState({contacters:t}),Object(b.k)(localStorage.getItem("currentUser")).then((function(a){console.log(a);for(var s=0;s<a.length;s+=1)t.includes(a[s].username)||n.push(a[s].username);console.log(n),e.setState({strangers:n})}))}))}},{key:"handleInputonChange",value:function(e){e.preventDefault(),this.setState({search:e.target.value});var t=this.state.search;console.log(t)}},{key:"handleInputonChangeStranger",value:function(e){e.preventDefault(),this.setState({searchStranger:e.target.value});var t=this.state.searchStranger;console.log(t)}},{key:"MessageSomeone",value:function(t){var n=this;this.setState({friend:t}),null!==document.getElementById("showimgArea")&&document.getElementById("showimgArea").setAttribute("src",""),this.setState({chat:""}),console.log(this.arrayOfContacts),console.log("sending Message to someone"),console.log("Talk to ".concat(t)),console.log("Curr user ".concat(this.props.username));var a=new Date;Object(b.i)(localStorage.getItem("currentUser"),t).then((function(s){var r=[],c=[],o=[],l=[],d=[];s.map((function(t){if("text"===t.message_type)c.push(t);else if("image"===t.message_type){var n=JSON.parse(t.message_content);o.push(n);var a=JSON.parse(t.message_content),s=URL.createObjectURL(new Blob([e.from(a.buffer)]));t.message_content=s}else if("video"===t.message_type){var i=JSON.parse(t.message_content);d.push(i);var u=JSON.parse(t.message_content),m=URL.createObjectURL(new Blob([e.from(u.buffer)]));t.message_content=m}else if("audio"===t.message_type){var h=JSON.parse(t.message_content);l.push(h);var g=JSON.parse(t.message_content),b=URL.createObjectURL(new Blob([e.from(g.buffer)]));t.message_content=b}return r.push(t),""}));var u=Object(i.jsx)(h.a,{from:localStorage.getItem("currentUser"),to:t,currentMessage:[],time:a,previousMessages:r,displayVideo:n.displayVideo});n.setState({chat:u})}))}},{key:"deleteFriend",value:function(e){var t=this.state,n=t.contacters,a=t.strangers;a.push(e);var s=n.filter((function(t){return t!==e?t:""}));this.setState({contacters:s}),this.setState({strangers:a}),Object(b.d)(localStorage.getItem("currentUser"),e)}},{key:"AddStangers",value:function(e){var t=this.state,n=t.contacters,a=t.strangers,s=n;s.push(e);var r=a.filter((function(t){return t!==e?t:""}));this.setState({contacters:s}),this.setState({strangers:r}),Object(b.a)(localStorage.getItem("currentUser"),e)}},{key:"displayVideo",value:function(){var e=Object(i.jsx)(j.a,{username:localStorage.getItem("currentUser"),endDisplayVideo:this.endDisplayVideo,friend:this.state.friend});this.setState({videoCall:e}),document.getElementById("addingContacts").style.display="none"}},{key:"endDisplayVideo",value:function(){this.setState({videoCall:[]}),document.getElementById("addingContacts").style.display="block"}},{key:"renderPeople",value:function(e){return Object(i.jsx)("div",{className:"col-md-3",style:{marginTop:"20px"},children:Object(i.jsx)(g.a,{name:e,AddStangers:this.AddStangers})})}},{key:"renderFriend",value:function(e){return Object(i.jsx)("div",{className:"col-md-3",style:{marginTop:"20px"},children:Object(i.jsx)(u.a,{name:e,messageSomeone:this.MessageSomeone,deleteFriend:this.deleteFriend})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.search,a=t.contacters,s=t.searchStranger,r=t.strangers,c=t.videoCall,o=a.filter((function(e){return-1!==e.toLowerCase().indexOf(n.toLowerCase())})),l=r.filter((function(e){return-1!==e.toLowerCase().indexOf(s.toLowerCase())}));return Object(i.jsxs)("div",{children:[Object(i.jsx)(m.a,{}),Object(i.jsx)(d.a,{}),Object(i.jsxs)("div",{id:"homeMainSection",children:[Object(i.jsxs)("div",{id:"page",children:[Object(i.jsx)("div",{id:"videoCall",children:c}),Object(i.jsxs)("div",{id:"addingContacts",children:[Object(i.jsxs)("div",{id:"searchBox",children:[Object(i.jsx)("span",{id:"searchLabel",children:"Search"}),Object(i.jsx)("input",{label:"Search Friend",icon:"search",onChange:this.handleInputonChange})]}),Object(i.jsx)("div",{id:"listOfContacts",children:o.map((function(t){return e.renderFriend(t)}))}),Object(i.jsxs)("div",{id:"AddContact",children:[Object(i.jsxs)("div",{id:"searchBoxStranger",children:[Object(i.jsx)("span",{id:"searchLabel",children:"Explore New People"}),Object(i.jsx)("input",{label:"Add Strangers",icon:"search",onChange:this.handleInputonChangeStranger})]}),Object(i.jsx)("div",{id:"PeopleToAdd",children:l.map((function(t){return e.renderPeople(t)}))})]})]})]}),Object(i.jsx)("div",{id:"chatBox",children:this.state.chat})]})]})}}]),l}(l.Component);t.a=p}).call(this,n(44).Buffer)},246:function(e,t,n){"use strict";var a=n(14),s=n(15),r=n(17),c=n(16),o=n(1),i=n(276),l=n(0),d=n(138),u=n(80),m=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).state={},s}return Object(s.a)(n,[{key:"render",value:function(){return Object(o.jsxs)("header",{id:"App-header",children:[Object(o.jsx)("img",{src:u.a,className:"App-logo",alt:"logo"}),Object(o.jsxs)("span",{className:"AppTitle",id:"logox",children:[" ","Video & Messaging Web App"]}),Object(o.jsx)(d.a,{to:"/profile",id:"loginLink",children:Object(o.jsx)(i.a,{id:"avatar",src:"https://i.pinimg.com/originals/57/82/2c/57822cd7a504b0d5ab8e0f6983a063de.jpg"})})]})}}]),n}(l.Component);t.a=m},247:function(e,t,n){"use strict";var a=n(7),s=n.n(a),r=n(19),c=n(24),o=n(1),i=n(251),l=n.n(i),d=n(252),u=n.n(d),m=n(249),h=n.n(m),g=n(250),b=n.n(g),j=n(253),p=n.n(j),f=n(31),v=n.n(f),O=n(0),x=n(20),y=n(248);function S(e){var t=Object(O.useState)(0),n=Object(c.a)(t,2),a=(n[0],n[1]),s=function(){return a((function(e){return e+1}))},r=e.to,i=e.from,d=function(){},m=function(){};function g(e){var t="".concat(e),n=e.indexOf("@");if(n>=0){var a=e.indexOf(" ",n+1);if(-1==a&&(a=e.length),a!=n+1){for(var s,r,c,o=e.split("@"),i=o[0],l=1;l<o.length;l+=1)-1==(s=o[l].indexOf(" "))&&(s=o[l].length),r=o[l].substring(0,s),c="http://localhost:3000/profileOther/".concat(r),i+="<a href=".concat(c,' target="_blank">@').concat(r,"</a>"),i+=o[l].substring(s);return{__html:i}}t="".concat(e)}else t="".concat(e);return{__html:t}}var j=e.previousMessages,f=e.currentMessageHtml,y=e.displayVideo,S=j,w=f,C=function(e){for(var t=0;t<S.length;t+=1)null!==S[t]&&S[t].message_time===e&&(console.log("find it"),Object(x.e)(S[t].mid),S.splice(t,1));for(var n=0;n<w.length;n+=1)console.log(w[n].rawtime),null!==w[n]&&w[n].message_time===e&&(console.log("find it"),Object(x.c)(w[n].rawtime),w.splice(n,1));s()};return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{children:"Talking To: "}),Object(o.jsx)("span",{children:r}),Object(o.jsxs)("div",{id:"displayDiv",children:[Object(o.jsx)("div",{children:S.map((function(t){if(null!==t)if(t.from_host===e.from){if("text"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleRight",children:[Object(o.jsx)("span",{className:"timeCssRight",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),Object(o.jsx)("div",{dangerouslySetInnerHTML:g(t.message_content)}),Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]});if("video"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleRight",children:[Object(o.jsx)("span",{className:"timeCssRight",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),Object(o.jsx)("video",{className:"video",controls:"controls",src:t.message_content}),Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]});if("image"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleRight",children:[Object(o.jsx)("span",{className:"timeCssRight",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),Object(o.jsx)("img",{width:"100",height:"100",src:t.message_content,alt:""}),Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]});if("audio"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleRight",children:[Object(o.jsx)("span",{className:"timeCssRight",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),Object(o.jsx)("audio",{className:"audio",controls:"controls",src:t.message_content}),Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]})}else{if("text"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleLeft",children:[Object(o.jsx)("span",{className:"timeCssLeft",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),t.message_content,Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]});if("video"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleLeft",children:[Object(o.jsx)("span",{className:"timeCssLeft",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),Object(o.jsx)("video",{className:"video",controls:"controls",src:t.message_content}),Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]});if("image"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleLeft",children:[Object(o.jsx)("span",{className:"timeCssLeft",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),Object(o.jsx)("img",{width:"100",height:"100",src:t.message_content,alt:""}),Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]});if("audio"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleLeft",children:[Object(o.jsx)("span",{className:"timeCssLeft",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),Object(o.jsx)("audio",{className:"audio",controls:"controls",src:t.message_content}),Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]})}}))}),Object(o.jsx)("div",{children:w.map((function(t){if(null!==t)if(t.from_host===e.from){if("text"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleRight",children:[Object(o.jsx)("span",{className:"timeCssRight",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),Object(o.jsx)("div",{dangerouslySetInnerHTML:g(t.message_content)}),Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]});if("video"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleRight",children:[Object(o.jsx)("span",{className:"timeCssRight",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),Object(o.jsx)("video",{className:"video",controls:"controls",src:t.message_content}),Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]});if("image"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleRight",children:[Object(o.jsx)("span",{className:"timeCssRight",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),Object(o.jsx)("img",{width:"100",height:"100",src:t.message_content,alt:""}),Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]});if("audio"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleRight",children:[Object(o.jsx)("span",{className:"timeCssRight",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),Object(o.jsx)("audio",{className:"audio",controls:"controls",src:t.message_content}),Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]})}else{if("text"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleLeft",children:[Object(o.jsx)("span",{className:"timeCssLeft",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),t.message_content,Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]});if("video"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleLeft",children:[Object(o.jsx)("span",{className:"timeCssLeft",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),Object(o.jsx)("video",{className:"video",controls:"controls",src:t.message_content}),Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]});if("image"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleLeft",children:[Object(o.jsx)("span",{className:"timeCssLeft",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),Object(o.jsx)("img",{width:"100",height:"100",src:t.message_content,alt:""}),Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]});if("audio"===t.message_type)return Object(o.jsxs)("div",{className:"bubbleLeft",children:[Object(o.jsx)("span",{className:"timeCssLeft",children:"".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8))}),Object(o.jsx)("br",{}),Object(o.jsx)("audio",{className:"audio",controls:"controls",src:t.message_content}),Object(o.jsx)("button",{onClick:function(){return C(t.message_time)},children:Object(o.jsx)(v.a,{})})]})}}))})]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{children:"Current User: "}),Object(o.jsx)("span",{children:i})]}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{id:"MessageBox",children:[Object(o.jsx)("textarea",{cols:"10",rows:"5",id:"msg",placeholder:"Type here/ Preview Section"}),Object(o.jsxs)("div",{id:"displayArea",children:[Object(o.jsx)("div",{id:"imageMessageDiv",children:Object(o.jsx)("img",{id:"showingArea",alt:""})}),Object(o.jsx)("div",{id:"videoMessageDiv",children:" "})]}),Object(o.jsx)("button",{type:"button",id:"messagebtn",className:"button",onClick:function(){return function(){var e=document.getElementById("msg").value;e.length>0&&r.length>0&&i.length>0&&(Object(x.p)(i,r,e),document.getElementById("msg").value="")}()},children:Object(o.jsx)(h.a,{})}),Object(o.jsx)("button",{type:"button",id:"videocallbtn",className:"button",onClick:function(){return y()},children:"Video Call"}),Object(o.jsx)("button",{type:"submit",id:"deleteCoversationButton",onClick:function(){return function(){s(),Object(x.b)(e.from,e.to);for(var t=0;t<S.length;t+=1)S[t]=null;for(var n=0;n<w.length;n+=1)w[n]=null}()},children:"Delete the conversation"})]}),Object(o.jsxs)("div",{id:"messageAndImgeButton",children:[Object(o.jsx)("input",{id:"imgInput",type:"file",name:"attachment[0][uploaded_data]",onChange:function(e){return function(e){if(0!==e.target.files.length)if(e.target.files[0].size>38e5)alert("File is too big!"),e.target.value="";else{var t=new FileReader;t.onload=function(){var n=new Image;n.src=t.result,document.getElementById("showingArea").setAttribute("src",n.src);var a=n.src;m=function(){a.length>0&&r.length>0&&i.length>0&&(Object(x.o)(i,r,e.target.files[0]),document.getElementById("showingArea").setAttribute("src",""),document.getElementById("imgInput").value=null)}},t.readAsDataURL(e.target.files[0])}}(e)},accept:".jpg"}),Object(o.jsx)("button",{type:"button",className:"button",onClick:function(){return m()},children:Object(o.jsx)(b.a,{})})]})]}),Object(o.jsxs)("div",{id:"audio",children:[Object(o.jsx)("button",{type:"button",className:"button",onClick:function(){return function(){document.getElementById("stopbtn").setAttribute("style","display: inline");var e=navigator.mediaDevices.getUserMedia({audio:!0}),t=[];e.then((function(e){window.streamReference=e;var n=new MediaRecorder(e);n.ondataavailable=function(e){if(t.push(e.data),"inactive"===n.state){var a=new Blob(t,{type:"audio/webm"}),s=document.getElementById("audioMessageDiv"),r=document.createElement("audio");r.setAttribute("controls","controls"),r.setAttribute("id","audioMessage"),null!==document.getElementById("audioMessage")&&document.getElementById("audioMessage").remove(),s.appendChild(r),r.innerHTML='<source src=" '.concat(URL.createObjectURL(a),'" type= "video/webm" />'),setaudioState(a)}},n.start(100),d=function(){n.stop(),window.streamReference&&(window.streamReference.getAudioTracks().forEach((function(e){e.stop()})),window.streamReference=null,document.getElementById("stopbtn").setAttribute("style","display: none"))}}))}()},children:Object(o.jsx)(l.a,{})}),Object(o.jsx)("button",{type:"submit",className:"button",id:"stopbtn",onClick:function(){return d()},children:Object(o.jsx)(u.a,{})}),Object(o.jsx)("button",{type:"submit",className:"button",onClick:function(){return Object(x.n)(i,r,audioState),void(null!==document.getElementById("audioMessage")&&document.getElementById("audioMessage").remove())},children:"send"}),Object(o.jsx)("div",{id:"audioMessageDiv",children:" "})]}),Object(o.jsxs)("div",{id:"video",children:[Object(o.jsx)("input",{id:"videoInput",type:"file",onChange:function(e){return function(e){if(0!==e.target.files.length)if(e.target.files[0].size>38e5)alert("File is too big!"),e.target.value="";else{var t=new FileReader;t.onload=function(){var n=document.getElementById("videoMessageDiv"),a=document.createElement("video");a.setAttribute("id","videoMessage"),a.setAttribute("controls","controls"),a.style.maxHeight="100px",a.style.maxWidth="200px",null!==document.getElementById("videoMessage")&&document.getElementById("videoMessage").remove(),n.appendChild(a),a.innerHTML='<source src=" '.concat(t.result,'" type= "video/mp4" />'),setVideoState(e.target.files[0])},t.readAsDataURL(e.target.files[0])}}(e)}}),Object(o.jsx)("button",{type:"submit",className:"button",onClick:function(){return Object(x.q)(i,r,videoState),void(null!==document.getElementById("videoMessage")&&(document.getElementById("videoMessage").remove(),document.getElementById("videoInput").value=null))},children:Object(o.jsx)(p.a,{})})]})]})}t.a=function(e){var t=Object(O.useState)(0),n=Object(c.a)(t,2),a=(n[0],n[1]),i=Object(O.useState)(0),l=Object(c.a)(i,2),d=(l[0],l[1]),u=e.previousMessages,m=e.currentMessage,h=e.time,g=e.from,b=e.to,j=e.displayVideo;console.log(j);var p=function(){return a((function(e){return e+1}))},f=function(){return d((function(e){return e+1}))},v=function(){var e=Object(r.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==sessionStorage.getItem("token")){e.next=5;break}return e.next=3,Object(x.l)(localStorage.getItem("currentUser"));case 3:(t=e.sent)&&sessionStorage.setItem("token",t);case 5:Object(y.a)(p,f,m,localStorage.getItem("currentUser")),a((function(e){return e+1}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.useEffect)((function(){v();var e=function(){sessionStorage.removeItem("token")};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[h]),Object(o.jsx)("div",{id:"chatbox",children:Object(o.jsx)(S,{currentMessageHtml:m,from:g,to:b,previousMessages:u,displayVideo:e.displayVideo})})}},248:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var a=function(t,n,a,s){if(null!==sessionStorage.getItem("token")){var r=new WebSocket("ws://localhost:8085",sessionStorage.getItem("token"));r.addEventListener("open",(function(){console.log("ws connection opened"),r.send("Hello Server!")})),r.addEventListener("message",(function(r){var c=JSON.parse(r.data);if("new user"===c.type&&(console.log("user "+c.user),t()),"delivered"===c.type){var o=(new Date).toISOString().slice(0,19);a.push({from_host:s,message_type:"text",message_content:" ".concat(c.text),message_time:"".concat(o),rawtime:"".concat(c.time)}),console.log(a),n()}if("new message"===c.type){console.log("new message");var i=(new Date).toISOString().slice(0,19);a.push({from_host:"friend",message_type:"text",message_content:" ".concat(c.text),message_time:"".concat(i),rawtime:"".concat(c.time)}),console.log(a),n()}if("image delivered"===c.type){var l=new Blob([e.from(c.imgUrl.buffer)]),d=(new Date).toISOString().slice(0,19);a.push({from_host:s,message_type:"image",message_content:"".concat(URL.createObjectURL(l)),message_time:"".concat(d)}),n()}if("new image message"===c.type){console.log("new image message");var u=new Blob([e.from(c.imgUrl.buffer)]),m=(new Date).toISOString().slice(0,19);a.push({from_host:"friend",message_type:"image",message_content:"".concat(URL.createObjectURL(u)),message_time:"".concat(m)}),console.log(a),n()}if("aduio delivered"===c.type){console.log("aduio delivered");var h=new Blob([e.from(c.audiofile.buffer)]),g=(new Date).toISOString().slice(0,19);a.push({from_host:s,message_type:"audio",message_content:"".concat(URL.createObjectURL(h)),message_time:"".concat(g)}),n()}if("new audio message"===c.type){console.log("new audio message");var b=new Blob([e.from(c.audiofile.buffer)]),j=(new Date).toISOString().slice(0,19);a.push({from_host:"friend",message_type:"audio",message_content:"".concat(URL.createObjectURL(b)),message_time:"".concat(j)}),n()}if("video delivered"===c.type){console.log("aduio delivered");var p=new Blob([e.from(c.videofile.buffer)]),f=(new Date).toISOString().slice(0,19);a.push({from_host:s,message_type:"video",message_content:"".concat(URL.createObjectURL(p)),message_time:"".concat(f)}),n()}if("new video message"===c.type){console.log("new audio message");var v=new Blob([e.from(c.videofile.buffer)]),O=(new Date).toISOString().slice(0,19);a.push({from_host:"friend",message_type:"video",message_content:"".concat(URL.createObjectURL(v)),message_time:"".concat(O)}),n()}})),r.addEventListener("close",(function(e){console.log("Connection closed bye bye! ")}))}}}).call(this,n(44).Buffer)},254:function(e,t,n){"use strict";var a=n(14),s=n(15),r=n(17),c=n(16),o=n(1),i=n(0),l=n(276),d=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).state={},s}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.AddStangers,t=this.props.name;return Object(o.jsxs)("div",{className:"contactBox",children:[Object(o.jsx)(l.a,{className:"stangerAvater",src:"https://img.favpng.com/6/14/19/computer-icons-user-profile-icon-design-png-favpng-vcvaCZNwnpxfkKNYzX3fYz7h2.jpg"}),Object(o.jsx)("button",{className:"addFriend",type:"submit",onClick:function(){e(t)},children:Object(o.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-person-plus-fill",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:Object(o.jsx)("path",{fillRule:"evenodd",d:"M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm7.5-3a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"})})}),Object(o.jsx)("div",{className:"strangers",id:t,children:t})]})}}]),n}(i.Component);t.a=d},260:function(e,t,n){"use strict";(function(e){var a=n(14),s=n(15),r=n(8),c=n(17),o=n(16),i=n(1),l=n(0),d=n(127),u=n.n(d),m=n(270),h=n.n(m),g=n(271),b=n(60),j=n(20),p=n(269),f=function(t){Object(c.a)(l,t);var n=Object(o.a)(l);function l(e){var t;return Object(a.a)(this,l),(t=n.call(this,e)).state={imgeFile:"",Story:[],dropBoxStyle:"none",PostButtonStyle:"inline"},t.handleChange=t.handleChange.bind(Object(r.a)(t)),t.hanldeSubmit=t.hanldeSubmit.bind(Object(r.a)(t)),t.handledisplayDropBox=t.handledisplayDropBox.bind(Object(r.a)(t)),t.handleCloseDropBox=t.handleCloseDropBox.bind(Object(r.a)(t)),t}return Object(s.a)(l,[{key:"componentDidMount",value:function(){var t=this;console.log("componentDidMount");var n=this.props.username;Object(j.j)(n).then((function(n){var a=n.map((function(t){var n=t.friend,a=JSON.parse(t.img_content),s="";null!==a&&(s=URL.createObjectURL(new Blob([e.from(a.buffer)])));var r=t.message_content,c="".concat(t.message_time.split("T")[0]," ").concat(t.message_time.split("T")[1].substr(0,8));return Object(i.jsx)(p.a,{name:n,textCotent:r,imgContent:s,postTime:c})}));t.setState({Story:a})}))}},{key:"handleChange",value:function(e){0!==e.length&&(e[0].size>38e5?alert("File is too big!"):this.setState({imgeFile:e[0]}))}},{key:"handledisplayDropBox",value:function(){this.setState({dropBoxStyle:"inline"}),this.setState({PostButtonStyle:"none"})}},{key:"handleCloseDropBox",value:function(){this.setState({dropBoxStyle:"none"}),this.setState({PostButtonStyle:"inline"})}},{key:"hanldeSubmit",value:function(){var e=this.state.imgeFile,t=this.props.username,n=document.getElementById("text").value;console.log(t),0===n.length&&""===e||Object(j.m)(t,n,e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.dropBoxStyle,a=t.PostButtonStyle;return Object(i.jsxs)("div",{children:[Object(i.jsx)(b.a,{}),Object(i.jsxs)("div",{id:"postStory",style:{display:n},children:[Object(i.jsx)("textarea",{id:"text",cols:"50",rows:"5",placeholder:"Share Your Story Here"}),Object(i.jsx)("div",{id:"dropbox",children:Object(i.jsx)(g.a,{id:"dropbox",acceptedFiles:["image/jpeg","image/png","image/bmp"],maxFileSize:38e5,filesLimit:1,onChange:this.handleChange.bind(this)})}),Object(i.jsx)("button",{type:"submit",onClick:function(){return e.hanldeSubmit()},children:Object(i.jsx)(h.a,{})}),Object(i.jsx)("button",{id:"closeDropBox",type:"submit",onClick:function(){return e.handleCloseDropBox()},children:Object(i.jsx)(u.a,{})})]}),Object(i.jsx)("button",{id:"displayDropBox",type:"submit",style:{display:a},onClick:function(){return e.handledisplayDropBox()},children:"Share a Post"}),Object(i.jsx)("div",{id:"StoryDiv",children:this.state.Story})]})}}]),l}(l.Component);t.a=f}).call(this,n(44).Buffer)},269:function(e,t,n){"use strict";var a=n(14),s=n(15),r=n(17),c=n(16),o=n(1),i=n(0),l=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).state={},s}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.textCotent,a=e.imgContent,s=e.postTime;return Object(o.jsxs)("div",{className:"Post",children:[Object(o.jsx)("div",{children:t}),Object(o.jsx)("div",{children:n}),Object(o.jsx)("div",{children:Object(o.jsx)("img",{width:"300",height:"200",src:"".concat(a),alt:""})}),Object(o.jsx)("div",{children:"".concat(s)})]})}}]),n}(i.Component);t.a=l},273:function(e,t,n){"use strict";var a=n(14),s=n(15),r=n(17),c=n(16),o=n(1),i=n(0),l=n(276),d=n.p+"static/media/chat.634357c2.png",u=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).state={},s}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.messageSomeone,n=e.deleteFriend,a=this.props.name;return Object(o.jsxs)("div",{className:"contactBox",children:[Object(o.jsx)(l.a,{className:"friendavatar",src:"https://img.favpng.com/6/14/19/computer-icons-user-profile-icon-design-png-favpng-vcvaCZNwnpxfkKNYzX3fYz7h2.jpg"}),Object(o.jsx)("button",{className:"messageButton",type:"submit",onClick:function(){t(a)},children:Object(o.jsx)("img",{id:"messageImage",src:d,alt:"message"})}),Object(o.jsxs)("button",{type:"button",className:"deleteFriend",onClick:function(){return n(a)},children:[" ",Object(o.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-person-x-fill",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:Object(o.jsx)("path",{fillRule:"evenodd",d:"M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6.146-2.854a.5.5 0 0 1 .708 0L14 6.293l1.146-1.147a.5.5 0 0 1 .708.708L14.707 7l1.147 1.146a.5.5 0 0 1-.708.708L14 7.707l-1.146 1.147a.5.5 0 0 1-.708-.708L13.293 7l-1.147-1.146a.5.5 0 0 1 0-.708z"})})]}),Object(o.jsx)("div",{className:"contacts",id:a,children:a})]})}}]),n}(i.Component);t.a=u},289:function(e,t,n){},290:function(e,t,n){},464:function(e,t){},488:function(e,t){},490:function(e,t){},509:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(0),r=n.n(s),c=n(13),o=n.n(c),i=(n(289),n(559)),l=n(14),d=n(15),u=n(8),m=n(17),h=n(16),g=(n(290),n(558)),b=n(560),j=n(561),p=n(172),f=n(554),v=n(555),O=n(549),x=n(138),y=n(80),S=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={flag:!1},a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.validateToNextPassword=a.validateToNextPassword.bind(Object(u.a)(a)),a.compareToFirstPassword=a.compareToFirstPassword.bind(Object(u.a)(a)),a.handleConfirmBlur=a.handleConfirmBlur.bind(Object(u.a)(a)),a}return Object(d.a)(n,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.form.validateFieldsAndScroll((function(e,t){var n=document.getElementById("errorMessage");if(null!=n&&n.remove(),!e){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.username,password:t.password})};fetch("http://localhost:8080/register",a).then((function(e){if(console.log(e.status),200===e.status){console.log("Success"),document.getElementById("RegisterForm").remove();var t=document.createElement("p");t.innerHTML="Registration was successful, Redirecting to Login Page",t.setAttribute("style","font-size: 20px;"),document.getElementById("RegisterDiv").appendChild(t),setTimeout((function(){window.top.location="http://localhost:3000/login"}),5500)}else if(400===e.status){var n=document.createElement("p");n.innerHTML="User Account Already Exist",n.setAttribute("id","errorMessage"),n.setAttribute("style","color: red;"),document.getElementById("RegisterDiv").appendChild(n),console.log("Not Successful")}})).catch((function(){return console.log("Error")}))}}))}},{key:"validateToNextPassword",value:function(e,t,n){var a=this.props.form;if(0!==t.length)if(t.length<5)n("length should > 5");else{for(var s=!0,r=!0,c=0;c<t.length;c+=1)t.charAt(c)>="0"&&t.charAt(c)<="9"&&(s=!1),(t.charAt(c)<"0"||t.charAt(c)>"9")&&(r=!1);s&&n("at least one number"),r&&n("Don't put all numbers"),t&&this.state.flag&&a.validateFields(["confirm"],{force:!0})}else t&&this.state.flag&&a.validateFields(["confirm"],{force:!0});n()}},{key:"compareToFirstPassword",value:function(e,t,n){var a=this.props.form;t&&t!==a.getFieldValue("password")?n("Please Enter the Same Passwords!"):n()}},{key:"handleConfirmBlur",value:function(e){var t=e.target.value,n=this.state.flag;this.setState({flag:n||!!t})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("header",{id:"App-header",children:[Object(a.jsx)("img",{src:y.a,className:"App-logo",alt:"logo"}),Object(a.jsxs)("span",{className:"AppTitle",id:"logox",children:[" ","Video & Messaging Web App"]})]}),Object(a.jsx)("div",{id:"RegisterDiv",children:Object(a.jsxs)(f.a,Object(p.a)(Object(p.a)({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}}),{},{className:"RegisterForm",id:"RegisterForm",children:[Object(a.jsx)(f.a.Item,{label:"Username",children:e("username",{rules:[{required:!0,message:"Please input your Username!"}]})(Object(a.jsx)(v.a,{className:"textbox"}))}),Object(a.jsx)(f.a.Item,{label:"Password",hasFeedback:!0,children:e("password",{rules:[{required:!0,message:"Please input your password!"},{validator:this.validateToNextPassword}]})(Object(a.jsx)(v.a.Password,{className:"textbox"}))}),Object(a.jsx)(f.a.Item,{label:"Confirm Password",hasFeedback:!0,children:e("confirm",{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(Object(a.jsx)(v.a.Password,{onBlur:this.handleConfirmBlur,className:"textbox"}))}),Object(a.jsx)(O.a,{className:"Button",color:"secondary",variant:"text",size:"large",onClick:this.handleSubmit,children:Object(a.jsx)("span",{id:"ResgisterSpan",children:"Register"})}),Object(a.jsxs)("div",{id:"JumpLinklogin",children:[Object(a.jsx)("span",{children:" I already have an account, "}),Object(a.jsxs)(x.a,{to:"/login",id:"registerLink",children:[" ","Go to Login"]})]})]}))})]})}}]),n}(s.Component),w=(f.a.create({name:"register"})(S),n(79)),C=n(7),k=n.n(C),B=n(19),I=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={username:"",password:""},a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(u.a)(a)),a}return Object(d.a)(n,[{key:"handleSubmit",value:function(){var e=Object(B.a)(k.a.mark((function e(t){var n,a,s,r,c=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0===this.state.username.length||0===this.state.password.length){e.next=16;break}if(null!==document.getElementById("loginErrorMessage")&&document.getElementById("loginErrorMessage").setAttribute("style","display: none;"),null===localStorage.getItem(this.state.username)){e.next=12;break}if(n=localStorage.getItem(this.state.username).split(" "),a=parseInt(n[0]),s=n[1],console.log("loginAttempt = ".concat(a)),console.log("lockoutTime = ".concat(s)),!(a>=3&&"undefined"!==s&&(Date.now()-parseInt(s))/1e3<30)){e.next=12;break}return console.log("lockout in effect!"),e.abrupt("return");case 12:return document.getElementById("loginButton").innerHTML="Login",r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password})},e.next=16,fetch("http://localhost:8080/login",r).then((function(e){if(e.json().then((function(e){console.log(e),c.props.handleLogin("token",e[0].username,e[0].password);var t="".concat(e[0].regidate.split("T")[0]," ").concat(e[0].regidate.split("T")[1].substr(0,8));c.props.handleDate(t)})),200===e.status){var t=document.createElement("p");t.innerHTML="Welcome back buddy!",t.setAttribute("id","loginMessage"),t.setAttribute("style","color: green;"),document.getElementById("login").appendChild(t),localStorage.setItem(c.state.username,"".concat(0," undefined"))}else{var n=null;if(null===document.getElementById("loginErrorMessage"))(n=document.createElement("p")).innerHTML="Your username or password is incorrect",n.setAttribute("id","loginErrorMessage"),n.setAttribute("style","color: red;"),document.getElementById("login").appendChild(n);else document.getElementById("loginErrorMessage").setAttribute("style","display: inline; color: red ");var a=1;if(null===localStorage.getItem(c.state.username))localStorage.setItem(c.state.username,"".concat(1," undefined")),console.log("".concat(c.state.username," not in map"));else if(a=parseInt(localStorage.getItem(c.state.username).split(" ")[0])+1,console.log("A loginAttemptTemp = ".concat(a)),a>=3){var s=Date.now();localStorage.setItem(c.state.username,"".concat(a," ").concat(s)),document.getElementById("loginButton").innerHTML="Lockout 30sec"}else localStorage.setItem(c.state.username,"".concat(a," undefined"))}})).catch((function(){}));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleInputChange",value:function(e){e.preventDefault(),this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("header",{id:"App-header",children:[Object(a.jsx)("img",{src:y.a,className:"App-logo",alt:"logo"}),Object(a.jsxs)("span",{className:"AppTitle",id:"logox",children:[" ","Video & Messaging Web App"]})]}),Object(a.jsx)("div",{id:"RegisterDiv"}),Object(a.jsxs)("div",{className:"loginMain",children:[Object(a.jsxs)("div",{className:"login",id:"login",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"fname",children:"Username :"}),Object(a.jsx)("input",{type:"text",id:"LoginUsername",className:"loginEle",name:"username",value:t,onChange:this.handleInputChange})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"fname",children:"Password :"}),Object(a.jsx)("input",{type:"password",id:"loginPassword",className:"loginEle",name:"password",value:n,onChange:this.handleInputChange})]}),Object(a.jsx)(O.a,{onClick:this.handleSubmit,type:"button",id:"loginButton",className:"loginEle",color:"primary",size:"large",children:"Login In"})]}),Object(a.jsxs)("div",{id:"JumpLink",children:[Object(a.jsx)("span",{children:" Or you could "}),Object(a.jsxs)(x.a,{to:"/register",id:"loginLink",children:[" ","register now!"]})]})]})]})}}]),n}(s.Component),_=n(245),N=n(177),D=n(276),E=(n(232),n(60)),L=n(20),P=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={passwordInput:"",newPassword:"",passwordConformation:"",profileButtonDivStyle:"inline",changePasswordDivStyle:"none",passwordErrorMessageStyle:"none",MatchErrorMessageStyle:"none",lengthErrorMessageStyle:"none",changeAvatorStyle:"none",deactivateDivStyle:"none",updatedPassword:"",deactivatePassword:"",profilePic:"https://i.pinimg.com/originals/57/82/2c/57822cd7a504b0d5ab8e0f6983a063de.jpg"},a.handlechangePasswordButton=a.handlechangePasswordButton.bind(Object(u.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(u.a)(a)),a.handleSetPassWordSubmit=a.handleSetPassWordSubmit.bind(Object(u.a)(a)),a.hanfleImgUpload=a.hanfleImgUpload.bind(Object(u.a)(a)),a.handlechangeAvatarButton=a.handlechangeAvatarButton.bind(Object(u.a)(a)),a.handledeactivateAccountButton=a.handledeactivateAccountButton.bind(Object(u.a)(a)),a.finishAvatorButton=a.finishAvatorButton.bind(Object(u.a)(a)),a.handleDeactivateButton=a.handleDeactivateButton.bind(Object(u.a)(a)),a.handledeactivateAccountButton=a.handledeactivateAccountButton.bind(Object(u.a)(a)),a.handleDeactivateGoback=a.handleDeactivateGoback.bind(Object(u.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){document.getElementById("changePasswordDiv").setAttribute("style","display:none");var e=this.props.password;this.setState({updatedPassword:e})}},{key:"handleSetPassWordSubmit",value:function(){var e=this.state,t=e.passwordInput,n=e.newPassword,a=e.passwordConformation,s=e.updatedPassword,r=!1,c=!1,o=!1,i=!1,l=!1;if(this.setState({passwordErrorMessageStyle:"none"}),this.setState({MatchErrorMessageStyle:"none"}),this.setState({lengthErrorMessageStyle:"none"}),n.length<5)this.setState({lengthErrorMessageStyle:"block"});else{for(var d=0;d<n.length;d+=1)n.charAt(d)>="0"&&n.charAt(d)<="9"&&(r=!0),(n.charAt(d)<"0"||n.charAt(d)>"9")&&(c=!0);r&&c?(this.setState({lengthErrorMessageStyle:"none"}),o=!0):this.setState({lengthErrorMessageStyle:"block"})}n!==a?this.setState({MatchErrorMessageStyle:"block"}):l=!0,s!==t?this.setState({passwordErrorMessageStyle:"block"}):i=!0,i&&o&&l&&(console.log("ready to fetch need to update database"),this.setState({profileButtonDivStyle:"block"}),this.setState({changePasswordDivStyle:"none"}),this.setState({updatedPassword:n}),console.log("updatedPassword:",n),Object(L.r)(this.props.username,n),localStorage.setItem("password",n))}},{key:"handlechangePasswordButton",value:function(){this.setState({profileButtonDivStyle:"none"}),this.setState({changePasswordDivStyle:"inline"})}},{key:"handlechangeAvatarButton",value:function(){this.setState({profileButtonDivStyle:"none"}),this.setState({changeAvatorStyle:"inline"})}},{key:"handledeactivateAccountButton",value:function(){this.setState({profileButtonDivStyle:"none"}),this.setState({deactivateDivStyle:"inline"})}},{key:"handleDeactivateButton",value:function(){var e=this.state;if(e.updatedPassword===e.deactivatePassword){var t=document.createElement("div");t.innerHTML="Good Bye!",document.getElementById("Profile").appendChild(t),Object(L.f)(this.props.username),localStorage.removeItem("TOKEN_KEY"),localStorage.removeItem("currentUser"),localStorage.removeItem("password"),localStorage.removeItem("date"),setTimeout((function(){window.top.location="http://localhost:3000/login"}),2e3)}}},{key:"handleInputChange",value:function(e){e.preventDefault(),console.log(e.target.value),this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"handleDeactivateGoback",value:function(){this.setState({profileButtonDivStyle:"inline"}),this.setState({deactivateDivStyle:"none"})}},{key:"hanfleImgUpload",value:function(e){if(console.log(e.target.files),0!==e.target.files.length)if(e.target.files[0].size>38e5)alert("File is too big!"),e.target.value="";else{var t=new FileReader;t.onload=function(){var e=new Image;e.src=t.result,console.log(e.src),this.setState({profilePic:e.src})}.bind(this),t.readAsDataURL(e.target.files[0])}}},{key:"finishAvatorButton",value:function(){this.setState({profileButtonDivStyle:"inline"}),this.setState({changeAvatorStyle:"none"})}},{key:"render",value:function(){var e=this.props,t=e.username,n=e.date,s=this.state,r=s.profileButtonDivStyle,c=s.changePasswordDivStyle,o=s.passwordInput,i=s.passwordErrorMessageStyle,l=s.newPassword,d=s.passwordConformation,u=s.MatchErrorMessageStyle,m=s.lengthErrorMessageStyle,h=s.changeAvatorStyle,g=s.deactivateDivStyle,b=s.profilePic,j=s.deactivatePassword;return Object(a.jsxs)("div",{id:"Profile",children:[Object(a.jsx)(E.a,{}),Object(a.jsx)("div",{children:Object(a.jsx)(D.a,{id:"avatarProfile",src:b})}),Object(a.jsx)("h1",{children:t}),Object(a.jsxs)("h3",{children:["Registration Date:",n]}),Object(a.jsx)("div",{id:"profileButtonDiv",style:{display:r},children:Object(a.jsxs)("div",{children:[Object(a.jsx)(N.a,{className:"profileButton",id:"changeAvatarButton",onClick:this.handlechangeAvatarButton,children:"change avatar / profile picture"}),Object(a.jsxs)("div",{children:[" ",Object(a.jsx)(N.a,{className:"profileButton",id:"changePasswordButton",onClick:this.handlechangePasswordButton,children:"Change password"})]}),Object(a.jsx)("div",{children:Object(a.jsx)(N.a,{className:"profileButton",id:"deactivateAccountButton",onClick:this.handledeactivateAccountButton,children:"Deactivate the account"})})]})}),Object(a.jsxs)("div",{style:{display:g},children:[Object(a.jsx)("input",{type:"password",id:"loginPassword",className:"loginEle",name:"deactivatePassword",value:j,onChange:this.handleInputChange}),Object(a.jsx)("button",{type:"button",id:"handleDeactivateButton",onClick:this.handleDeactivateButton,children:"Deactivate"}),Object(a.jsxs)("button",{type:"submit",onClick:this.handleDeactivateGoback,children:[" ","Go back"]})]}),Object(a.jsxs)("div",{style:{display:h},children:[Object(a.jsx)("input",{type:"file",name:"attachments[0][uploaded_data]",onChange:this.hanfleImgUpload,accept:"image/png, image/jpeg"}),Object(a.jsx)("button",{type:"button",onClick:this.finishAvatorButton,children:"Finish"})]}),Object(a.jsx)("div",{id:"changePasswordDiv",style:{display:c},children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"Orginal Password: "}),Object(a.jsx)("input",{id:"loginPassword",className:"loginEle",name:"passwordInput",value:o,onChange:this.handleInputChange}),Object(a.jsx)("div",{style:{display:i,color:"red"},children:"Your orginal password is incorrect"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"New Password :"}),Object(a.jsx)("input",{type:"password",id:"loginPassword",className:"loginEle",name:"newPassword",value:l,onChange:this.handleInputChange})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"Password Conformation:"}),Object(a.jsx)("input",{type:"password",id:"loginPassword",className:"loginEle",name:"passwordConformation",value:d,onChange:this.handleInputChange})]}),Object(a.jsx)("div",{style:{display:u,color:"red"},children:"passwords doesn't Match!"}),Object(a.jsx)("div",{style:{display:m,color:"red"},children:"passwords length should be greater than 5 and should contain at least a digit and a character"}),Object(a.jsx)(N.a,{onClick:this.handleSetPassWordSubmit,type:"button",id:"loginButton",className:"loginEle",color:"primary",size:"small",children:"Reset Password"})]})})]})}}]),n}(s.Component),T=n(260),A=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={profilePic:"",username:"",regidate:""},a.handleGoBack=a.handleGoBack.bind(Object(u.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/"),n=t[t.length-1];Object(L.g)(n).then((function(t){t.map((function(t){var n=t.username,a=t.picture,s=t.regidate.split("T")[0];return e.setState({username:n}),e.setState({regidate:s}),e.setState({profilePic:a}),""}))}))}},{key:"handleGoBack",value:function(){window.location="http://localhost:3000/homepage"}},{key:"render",value:function(){var e=this.state,t=e.username,n=e.regidate,s=e.profilePic;if(""===t){t="This user doesn't exist!",n="Nothing here, please:";var r=["https://media.tenor.com/images/62238792a26f1957ee104fd17a54aaf8/tenor.gif","https://www.gannett-cdn.com/presto/2019/07/01/USAT/56586d90-810d-408d-88d2-6340354d3c0c-VPC_DOG_CONFUSED_BY_VR_DESK_THUMB.jpg?width=388&height=388&crop=1080,1080,x290,y0","https://steamuserimages-a.akamaihd.net/ugc/791992712493073080/9BF5EE311E5ED5B66350C0554262147CF3327D06/","https://i.pinimg.com/originals/2a/80/9b/2a809b94926506068601c0506b5ef85f.jpg","https://pbs.twimg.com/media/CDcyxK4WoAEPscs.jpg","https://media.tenor.com/images/1879002401ffe6821c57e0434f125e5a/tenor.gif"];s=r[Math.floor(Math.random()*r.length)]}else n="Registration Date: ".concat(n);return Object(a.jsxs)("div",{id:"Profile",children:[Object(a.jsx)(E.a,{}),Object(a.jsx)("div",{children:Object(a.jsx)(D.a,{id:"avatarProfile",src:s})}),Object(a.jsx)("h1",{children:t}),Object(a.jsx)("h3",{children:n}),Object(a.jsx)("div",{children:Object(a.jsxs)("button",{type:"submit",onClick:this.handleGoBack,children:[" ","Go back"]})})]})}}]),n}(s.Component),M=n(132),R=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={},a.getLogin=a.getLogin.bind(Object(u.a)(a)),a.getHome=a.getHome.bind(Object(u.a)(a)),a.getProfile=a.getProfile.bind(Object(u.a)(a)),a.getStory=a.getStory.bind(Object(u.a)(a)),a}return Object(d.a)(n,[{key:"getHome",value:function(){return this.props.loginStatus?Object(a.jsx)(_.a,{username:localStorage.getItem("currentUser"),password:localStorage.getItem("password")}):Object(a.jsx)(g.a,{to:"/login"})}},{key:"getLogin",value:function(){return console.log(this.props.loginStatus),this.props.loginStatus?Object(a.jsx)(g.a,{to:"/homepage"}):Object(a.jsx)(I,{handleLogin:this.props.handleLogin,handleDate:this.props.handleDate})}},{key:"getProfile",value:function(){return Boolean(localStorage.getItem("TOKEN_KEY"))?Object(a.jsx)(P,{username:localStorage.getItem("currentUser"),password:localStorage.getItem("password"),date:localStorage.getItem("date")}):Object(a.jsx)(g.a,{to:"/login"})}},{key:"getStory",value:function(){return Boolean(localStorage.getItem("TOKEN_KEY"))?(console.log(this.props.username),Object(a.jsx)(T.a,{username:localStorage.getItem("currentUser")})):Object(a.jsx)(g.a,{to:"/login"})}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"main",children:Object(a.jsxs)(b.a,{children:[Object(a.jsx)(j.a,{path:"/login",component:this.getLogin}),Object(a.jsx)(j.a,{path:"/homepage",component:this.getHome}),Object(a.jsx)(j.a,{path:"/profile",component:this.getProfile}),Object(a.jsx)(j.a,{path:"/story",component:this.getStory}),Object(a.jsx)(j.a,{path:"/ProfileOther",component:A}),Object(a.jsx)(j.a,{path:"/videocall",render:function(){return Object(a.jsx)(M.a,{username:localStorage.getItem("currentUser")})}})]})})}}]),n}(s.Component),U=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).state={loginStatus:Boolean(localStorage.getItem("TOKEN_KEY")),username:"",password:"",registdate:""},e.handleLogink=e.handleLogink.bind(Object(u.a)(e)),e.handleDate=e.handleDate.bind(Object(u.a)(e)),e}return Object(d.a)(n,[{key:"handleLogink",value:function(e,t,n){localStorage.setItem("TOKEN_KEY",e),localStorage.setItem("currentUser",t),localStorage.setItem("password",n),this.setState({loginStatus:!0}),this.setState({username:t}),this.setState({password:n})}},{key:"handleDate",value:function(e){localStorage.setItem("date",e),this.setState({registdate:e})}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(R,{loginStatus:this.state.loginStatus,handleLogin:this.handleLogink,handleDate:this.handleDate,username:this.state.username,password:this.state.password,registdate:this.state.registdate})})}}]),n}(r.a.Component),F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,562)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};o.a.render(Object(a.jsx)(i.a,{children:Object(a.jsx)(U,{})}),document.getElementById("root")),F()},60:function(e,t,n){"use strict";var a=n(14),s=n(15),r=n(17),c=n(16),o=n(1),i=n(0),l=n(513),d=n(510),u=n(179),m=n(275),h=n(140),g=n(180),b=n(138),j=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).state={},s}return Object(s.a)(n,[{key:"handleLogout",value:function(){localStorage.removeItem("TOKEN_KEY"),localStorage.removeItem("currentUser"),localStorage.removeItem("password"),localStorage.removeItem("date"),setTimeout((function(){window.top.location="http://localhost:3000/login"}),1e3)}},{key:"render",value:function(){return Object(o.jsxs)("div",{className:"n\\NavigationBar",children:[Object(o.jsx)(d.a,{}),Object(o.jsxs)(l.a,{className:"drawer",variant:"permanent",anchor:"left",children:[Object(o.jsx)(m.a,{}),Object(o.jsx)(u.a,{children:Object(o.jsx)(h.a,{button:!0,children:Object(o.jsx)(g.a,{primary:Object(o.jsx)(b.a,{to:"/homepage",children:"People"})})},"People")}),Object(o.jsx)(u.a,{children:Object(o.jsx)(h.a,{button:!0,children:Object(o.jsx)(g.a,{primary:Object(o.jsx)(b.a,{to:"/story",children:"Story"})})},"Story")}),Object(o.jsx)(m.a,{}),Object(o.jsxs)(u.a,{children:[Object(o.jsx)(h.a,{button:!0,children:Object(o.jsx)(g.a,{primary:Object(o.jsx)(b.a,{to:"/profile",children:"Profile"})})},"Profile"),Object(o.jsx)(h.a,{button:!0,children:Object(o.jsx)("button",{type:"submit",onClick:this.handleLogout,children:"Logout"})},"Logout")]})]})]})}}]),n}(i.Component);t.a=j},80:function(e,t,n){"use strict";t.a=n.p+"static/media/messenger.f298aa90.svg"}},[[509,1,2]]]);
//# sourceMappingURL=main.92b6905a.chunk.js.map