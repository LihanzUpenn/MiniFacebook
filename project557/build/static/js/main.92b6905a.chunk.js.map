{"version":3,"sources":["components/Timer.js","audioclips/one_piece_phone.mp3","components/Videocall.js","components/getData.js","components/Home.js","components/TopBanner.js","components/Chat.js","components/notifications.js","components/Stranger.js","components/Story.js","components/Post.js","images/chat.png","components/Contacts.js","components/Register.js","components/Login.js","components/Profile.js","components/ProfileOther.js","components/Main.js","components/App.js","reportWebVitals.js","index.js","components/NavigationBar.js","images/messenger.svg"],"names":["Timer","props","time","h","m","s","ms","Container","styled","div","Row","Video","video","Videocall","useState","yourID","setYourID","partnerID","setpartnerID","users","setUsers","stream","setStream","endCallStyle","setendCallStyle","receivingCall","setReceivingCall","caller","setCaller","callerSignal","setCallerSignal","callAccepted","setCallAccepted","userVideo","useRef","partnerVideo","socket","setTime","interv","setInterv","setStatus","start","clearInterval","run","setInterval","updatedMs","updatedS","updatedM","updatedH","useEffect","current","io","connect","query","username","navigator","mediaDevices","getUserMedia","audio","then","srcObject","on","id","data","from","signal","soundPlay","UserVideo","PartnerVideo","incomingCall","src","ringbell","Howl","html5","play","playsInline","muted","ref","autoPlay","document","getElementById","style","display","console","log","type","onClick","innerHTML","peer","Peer","initiator","trickle","emit","to","singal","endDisplayVideo","id1","id2","Object","keys","map","key","friend","config","iceServers","urls","credential","userToCall","signalData","callPeer","axios","require","joinChat","user","a","length","post","res","token","sendMessage","sender","receiver","content","message","sendImage","formData","FormData","append","sendAudio","sendVideo","getMessage","x","get","JSON","stringify","postStory","textContent","imgfile","getStory","hostName","getFriends","getStrangers","deleteFriend","delete","addFriend","deleteUser","updatePassword","password","getAtUser","deleteMessageInDataBase","dataID","fetch","method","headers","body","mid","catch","deleteCurrentMessageInDataBase","messageTime","rawTime","deleteConversationInDataBase","Home","state","contacters","strangers","search","searchStranger","chat","videoCall","MessageSomeone","bind","handleInputonChange","handleInputonChangeStranger","AddStangers","displayVideo","setAttribute","localStorage","getItem","arrayOfContacts","arrayOfStranges","response","i","push","setState","response2","includes","e","preventDefault","this","target","value","friendname","Date","previousMessages","messagesTemp","imgTemp","voiceTemp","videoTemp","obj","message_type","temp","parse","message_content","mc","urlTemp","URL","createObjectURL","Blob","Buffer","buffer","ChatComponent","currentMessage","name","filteredStangers","filteredcontacters","filter","videoCallDiv","stranger","className","marginTop","messageSomeone","filteredarrayOfContacts","toLowerCase","indexOf","filteredarrayOfAddPeople","label","icon","onChange","renderFriend","renderPeople","Component","TopBanner","logo","alt","MessagesComponent","setconversation","conversationState","conversation","stopAudioButton","uploadImg","processAt_2","message_content_temp_str","index1","index2","index3","name_at","url","message_at_array","split","substring","__html","currentMessageHtml","previousMessagesCopy","currentMessageHtmlCopy","deleteMessage","message_time","splice","rawtime","msg","from_host","substr","dangerouslySetInnerHTML","controls","width","height","cols","rows","placeholder","text","sendMsg","deleteConversation","files","size","alert","reader","FileReader","onload","img","Image","result","imgURL","readAsDataURL","handleSendImg","accept","device","items","window","streamReference","recorder","MediaRecorder","ondataavailable","blob","mainaudio","createElement","remove","appendChild","setaudioState","stop","getAudioTracks","forEach","track","audioButton","audioState","videoMessageDiv","thevideo","maxHeight","maxWidth","setVideoState","handleSendVideo","videoState","Chat","setContacts","setMessages","updateContacts","contacts","updateMessages","messages","authenticate","sessionStorage","setItem","setupWSConnection","cleanup","removeItem","addEventListener","removeEventListener","host","WebSocket","send","event","pushMessage","toISOString","slice","imgUrl","audiofile","videofile","_event","Stangers","viewBox","fill","xmlns","fillRule","d","Story","imgeFile","dropBoxStyle","PostButtonStyle","handleChange","hanldeSubmit","handledisplayDropBox","handleCloseDropBox","story","friendName","img_content","messageContent","textCotent","imgContent","postTime","acceptedFiles","maxFileSize","filesLimit","Post","Contacts","Avatar","RegistrationForm","flag","handleSubmit","validateToNextPassword","compareToFirstPassword","handleConfirmBlur","form","validateFieldsAndScroll","err","values","existedErrMessage","requestOptions","status","LinktoLogin","setTimeout","top","location","errorMessage","rule","callback","oneDigit","oneCharacter","charAt","validateFields","force","getFieldValue","p","getFieldDecorator","labelCol","xs","span","sm","wrapperCol","Item","rules","required","hasFeedback","validator","Password","onBlur","Button","color","variant","Link","Form","create","Login","handleInputChange","arrayTemp","loginAttempt","parseInt","lockoutTime","now","json","handleLogin","rd","regidate","handleDate","loginMessage","loginErrorMessage","loginAttemptTemp","timeTemp","htmlFor","Profile","passwordInput","newPassword","passwordConformation","profileButtonDivStyle","changePasswordDivStyle","passwordErrorMessageStyle","MatchErrorMessageStyle","lengthErrorMessageStyle","changeAvatorStyle","deactivateDivStyle","updatedPassword","deactivatePassword","profilePic","handlechangePasswordButton","handleSetPassWordSubmit","hanfleImgUpload","handlechangeAvatarButton","handledeactivateAccountButton","finishAvatorButton","handleDeactivateButton","handleDeactivateGoback","digitFlag","charFlag","newPasswordCheck","passwordCheck","matchCheck","ByeMessage","date","NavigationBar","ProfileOther","handleGoBack","urlArray","href","atName","username_temp","pic_temp","picture","date_temp","nonexistPic","Math","floor","random","Main","getLogin","getHome","getProfile","loginStatus","Redirect","Boolean","Switch","Route","path","component","render","App","registdate","handleLogink","token1","username1","password1","React","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","BrowserRouter","anchor","button","primary","handleLogout"],"mappings":"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","file":"static/js/main.92b6905a.chunk.js","sourcesContent":["/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/prop-types */\nimport React from \"react\";\n\nfunction Timer(props) {\n  const h = () => {\n    if (props.time.h === 0) {\n      return \"\";\n    }\n    return (\n      <span>{props.time.h >= 10 ? props.time.h : `0${props.time.h}`}</span>\n    );\n  };\n  return (\n    <div>\n      {h()}\n      &nbsp;&nbsp;\n      <span>{props.time.m >= 10 ? props.time.m : `0${props.time.m}`}</span>\n      &nbsp;:&nbsp;\n      <span>{props.time.s >= 10 ? props.time.s : `0${props.time.s}`}</span>\n      &nbsp;:&nbsp;\n      <span>{props.time.ms >= 10 ? props.time.ms : `0${props.time.ms}`}</span>\n    </div>\n  );\n}\n\nexport default Timer;\n","export default __webpack_public_path__ + \"static/media/one_piece_phone.ecb3b48f.mp3\";","/* eslint-disable  */\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { Howl } from \"howler\";\n// import \"./App.css\";\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport styled from \"styled-components\";\nimport Timer from \"./Timer\";\nimport ringbell from \"../audioclips/one_piece_phone.mp3\";\n\nconst Container = styled.div`\n  height: 50vh;\n  width: 50%;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  width: 100%;\n`;\n\nconst Video = styled.video`\n  border: 1px solid blue;\n  width: 200px;\n  height: 150px;\n`;\n\nfunction Videocall(props) {\n  const [yourID, setYourID] = useState(\"\");\n  const [partnerID, setpartnerID] = useState(\"\");\n  const [users, setUsers] = useState({});\n  const [stream, setStream] = useState();\n  const [endCallStyle, setendCallStyle] = useState(\"none\");\n  const [receivingCall, setReceivingCall] = useState(false);\n  const [caller, setCaller] = useState(\"\");\n  const [callerSignal, setCallerSignal] = useState();\n  const [callAccepted, setCallAccepted] = useState(false);\n  const [endCallState, setendCallState] = useState(false);\n  const [ringbellState, setringbellState] = useState(true);\n  const [r, setr] = useState(\"\");\n\n  const userVideo = useRef();\n  const partnerVideo = useRef();\n  const socket = useRef();\n\n  // ////////////////\n\n  const [time, setTime] = useState({ ms: 0, s: 0, m: 0, h: 0 });\n  const [interv, setInterv] = useState();\n  const [status, setStatus] = useState(0);\n  // Not started = 0\n  // started = 1\n  // stopped = 2\n\n  const start = () => {\n    clearInterval(interv);\n    run();\n    setStatus(1);\n    setInterv(setInterval(run, 10));\n  };\n\n  const reset = () => {\n    clearInterval(interv);\n    setStatus(0);\n    setTime({ ms: 0, s: 0, m: 0, h: 0 });\n  };\n\n  var updatedMs = time.ms,\n    updatedS = time.s,\n    updatedM = time.m,\n    updatedH = time.h;\n\n  const run = () => {\n    if (updatedM === 60) {\n      updatedH++;\n      updatedM = 0;\n    }\n    if (updatedS === 60) {\n      updatedM++;\n      updatedS = 0;\n    }\n    if (updatedMs === 100) {\n      updatedS++;\n      updatedMs = 0;\n    }\n    updatedMs++;\n    return setTime({ ms: updatedMs, s: updatedS, m: updatedM, h: updatedH });\n  };\n\n  useEffect(() => {\n    socket.current = io.connect(\"/\", { query: `loggeduser=${props.username}` });\n    navigator.mediaDevices\n      .getUserMedia({ video: true, audio: true })\n      .then((stream) => {\n        setStream(stream);\n        if (userVideo.current) {\n          userVideo.current.srcObject = stream;\n        }\n      });\n\n    socket.current.on(\"yourID\", (id) => {\n      setYourID(id);\n    });\n    socket.current.on(\"allUsers\", (users) => {\n      setUsers(users);\n    });\n\n    socket.current.on(\"hey\", (data) => {\n      setReceivingCall(true);\n      setCaller(data.from);\n      setCallerSignal(data.signal);\n      setInterv(setInterval(soundPlay, 3000));\n    });\n  }, []);\n\n  function callPeer(id) {\n    setpartnerID(id);\n    document.getElementById(\"message\").innerHTML = \"\";\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      config: {\n        iceServers: [\n          {\n            urls: \"stun:numb.viagenie.ca\",\n            username: \"sultan1640@gmail.com\",\n            credential: \"98376683\",\n          },\n          {\n            urls: \"turn:numb.viagenie.ca\",\n            username: \"sultan1640@gmail.com\",\n            credential: \"98376683\",\n          },\n        ],\n      },\n      stream: stream,\n    });\n\n    peer.on(\"signal\", (data) => {\n      socket.current.emit(\"callUser\", {\n        userToCall: id,\n        signalData: data,\n        from: yourID,\n      });\n    });\n\n    peer.on(\"stream\", (stream) => {\n      if (partnerVideo.current) {\n        partnerVideo.current.srcObject = stream;\n      }\n    });\n\n    socket.current.on(\"callAccepted\", (signal) => {\n      start();\n      setUsers({});\n      setCallAccepted(true);\n      setendCallStyle(\"inline\");\n      peer.signal(signal);\n    });\n    socket.current.on(\"callDeclinedbyReceiver\", (signal) => {\n      document.getElementById(\"message\").innerHTML = \"Call is rejected\";\n    });\n\n    socket.current.on(\"Callend\", (singal) => {\n      console.log(\"lalala\");\n      console.log(\"singal\");\n      setendCallStyle(\"none\");\n      props.endDisplayVideo();\n      socket.current.emit(\"disconnected\", { id1: yourID, id2: partnerID });\n    });\n  }\n\n  function acceptCall() {\n    document.getElementById(\"acceptButton\").style.display = \"none\";\n    document.getElementById(\"declineButton\").style.display = \"none\";\n    document.getElementById(\"callLabel\").style.display = \"none\";\n    document.getElementById(\"message\").innerHTML = \"\";\n\n    start();\n    setUsers({});\n    setendCallStyle(\"inline\");\n    setCallAccepted(true);\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream: stream,\n    });\n    peer.on(\"signal\", (data) => {\n      socket.current.emit(\"acceptCall\", { signal: data, to: caller });\n    });\n\n    peer.on(\"stream\", (stream) => {\n      partnerVideo.current.srcObject = stream;\n    });\n\n    peer.signal(callerSignal);\n\n    socket.current.on(\"CallendbyCaller\", (singal) => {\n      console.log(\"lalala\");\n      console.log(\"singal\");\n      setendCallStyle(\"none\");\n      props.endDisplayVideo();\n      socket.current.emit(\"disconnected\", { id1: yourID, id2: partnerID });\n    });\n  }\n\n  const soundPlay = () => {\n    const src = ringbell;\n    const sound = new Howl({ src, html5: true });\n    sound.play();\n  };\n\n  function handleEndCall() {\n    socket.current.emit(\"disconnected\", { id1: yourID, id2: partnerID });\n    setendCallStyle(\"none\");\n    socket.current.emit(\"endCall\", { signal: \"data\", to: caller });\n    socket.current.emit(\"callerEndCall\", { signal: \"data\", to: partnerID });\n    props.endDisplayVideo();\n  }\n\n  function declineCall() {\n    clearInterval(interv);\n    console.log(\"decline\");\n    socket.current.emit(\"declineCall\", { signal: \"data\", to: caller });\n    document.getElementById(\"incomingCall\").style.display = \"none\";\n    setReceivingCall(false);\n  }\n\n  function handleGoBack() {\n    socket.current.emit(\"disconnected\", { id1: yourID, id2: partnerID });\n    props.endDisplayVideo();\n  }\n\n  let UserVideo;\n  if (stream) {\n    UserVideo = <Video playsInline muted ref={userVideo} autoPlay />;\n  }\n\n  let PartnerVideo;\n  if (callAccepted) {\n    PartnerVideo = <Video playsInline ref={partnerVideo} autoPlay />;\n  }\n  let bell;\n  let incomingCall;\n  if (receivingCall) {\n    if (document.getElementById(\"incomingCall\")) {\n      document.getElementById(\"incomingCall\").style.display = \"inline\";\n    }\n    console.log(users[caller]);\n    incomingCall = (\n      <div>\n        <h1 id=\"callLabel\"> {users[caller]} is calling you</h1>\n        <button type=\"submit\" onClick={acceptCall} id=\"acceptButton\">\n          Accept\n        </button>\n        <button type=\"submit\" onClick={declineCall} id=\"declineButton\">\n          Decline\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <Container>\n      <Row id=\"videoes\">\n        {UserVideo}\n        {PartnerVideo}\n        <button\n          type=\"submit\"\n          onClick={handleEndCall}\n          id=\"endCallbutton\"\n          style={{ display: endCallStyle }}\n        >\n          End Call\n        </button>\n        <p id=\"message\"></p>\n      </Row>\n      <Row>\n        {Object.keys(users).map((key) => {\n          console.log(props.friend);\n          if (key === yourID) {\n            return null;\n          }\n          if (users[key] !== props.friend) {\n            return null;\n          }\n          return (\n            <button onClick={() => callPeer(key)}>Call {users[key]}</button>\n          );\n        })}\n      </Row>\n      <Row id=\"incomingCall\">{incomingCall}</Row>\n      <Row>\n        <button type=\"submit\" onClick={handleGoBack} id=\"endCallbutton\">\n          Go Back\n        </button>\n      </Row>\n      <Row>\n        <Timer time={time} />\n      </Row>\n    </Container>\n  );\n}\n\nexport default Videocall;\n","const axios = require(\"axios\");\n\nexport const getUsers = async () => {\n  const res = await axios.get(\"http://localhost:8080/users\");\n  return res.data.data;\n};\n\nexport const joinChat = async (user) => {\n  try {\n    if (user.length > 0) {\n      const data = `username=${user}`;\n      const res = await axios.post(\"http://localhost:8080/checkin\", data);\n      return res.data.token;\n    }\n  } catch (err) {\n    // console.log(err);\n  }\n  return \"\";\n};\n\nexport const sendMessage = async (sender, receiver, content) => {\n  const data = `to=${receiver}&from=${sender}&message=${content}`;\n  const res = await axios.post(\"http://localhost:8080/message\", data);\n  return res.data.message;\n};\n\nexport const sendImage = async (sender, receiver, content) => {\n  // console.log(content);\n  const formData = new FormData();\n  formData.append(\"from\", sender);\n  formData.append(\"to\", receiver);\n  formData.append(\"file\", content);\n\n  const res = await axios.post(\"http://localhost:8080/image\", formData);\n  return res.data.message;\n};\n\nexport const sendAudio = async (sender, receiver, content) => {\n  //  console.log(content);\n  const formData = new FormData();\n  formData.append(\"from\", sender);\n  formData.append(\"to\", receiver);\n  formData.append(\"file\", content);\n\n  const res = await axios.post(\"http://localhost:8080/audio\", formData);\n  return res.data.message;\n};\n\nexport const sendVideo = async (sender, receiver, content) => {\n  //  console.log(content);\n  const formData = new FormData();\n  formData.append(\"from\", sender);\n  formData.append(\"to\", receiver);\n  formData.append(\"file\", content);\n\n  const res = await axios.post(\"http://localhost:8080/video\", formData);\n  return res.data.message;\n};\n\nexport const getMessage = async (sender, receiver) => {\n  const x = { from: sender, to: receiver };\n\n  const res = await axios.get(\n    `http://localhost:8080/messagetest/${JSON.stringify(x)}`\n  );\n\n  return res.data;\n};\n\nexport const postStory = async (sender, textContent, imgfile) => {\n  const formData = new FormData();\n  formData.append(\"from\", sender);\n  formData.append(\"text\", textContent);\n  formData.append(\"file\", imgfile);\n  console.log(imgfile);\n\n  const res = await axios.post(\"http://localhost:8080/poststory\", formData);\n  return res.data.message;\n};\n\nexport const getStory = async (hostName) => {\n  console.log(\"getStory\");\n  console.log(hostName);\n  const res = await axios.get(`http://localhost:8080/getstory/${hostName}`);\n  // console.log(res.data);\n  return res.data;\n};\n\nexport const getFriends = async (username) => {\n  console.log(\"getFriends\");\n  console.log(username);\n  const res = await axios.get(`http://localhost:8080/getfriends/${username}`);\n  return res.data;\n};\n\nexport const getStrangers = async (username) => {\n  console.log(\"getStrangers\");\n  console.log(username);\n  const res = await axios.get(`http://localhost:8080/getstrangers/${username}`);\n  return res.data;\n};\n\nexport const deleteFriend = async (username, friend) => {\n  console.log(\"deleteFriend\");\n  console.log(username);\n  console.log(friend);\n\n  // const formData = new FormData();\n  // formData.append(\"username\", username);\n  // formData.append(\"friend\", friend);\n  const res = await axios.delete(`http://localhost:8080/deletefriend`, {\n    // eslint-disable-next-line object-shorthand\n    data: { username: username, friend: friend },\n  });\n  return res.data;\n};\n\nexport const addFriend = async (username, friend) => {\n  console.log(\"addFriend\");\n  console.log(username);\n  console.log(friend);\n\n  const res = await axios.get(\n    `http://localhost:8080/addfriend/${username}&${friend}`\n  );\n  return res.data;\n};\n\nexport const deleteUser = async (username) => {\n  console.log(\"deleteFriend\");\n  console.log(username);\n\n  // const formData = new FormData();\n  // formData.append(\"username\", username);\n  // formData.append(\"friend\", friend);\n  const res = await axios.delete(`http://localhost:8080/deleteuser`, {\n    // eslint-disable-next-line object-shorthand\n    data: { username: username },\n  });\n  return res.data;\n};\n\nexport const updatePassword = async (username, password) => {\n  console.log(\"updatePassword\");\n  console.log(username);\n\n  // const formData = new FormData();\n  // formData.append(\"username\", username);\n  // formData.append(\"friend\", friend);\n  const data = `username=${username}&newPassword=${password}`;\n  const res = await axios.post(\"http://localhost:8080/updatepassword\", data);\n  return res.data;\n};\n\nexport const getAtUser = async (username) => {\n  console.log(`getAtUser${username}`);\n  const res = await axios.get(`http://localhost:8080/exist/${username}`);\n  return res.data;\n};\n\nexport const deleteMessageInDataBase = async (dataID) => {\n  await fetch(\"http://localhost:8080/deletemessage\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ mid: dataID }),\n  }).catch(() => {\n    // console.log(error);deleteConversationInDataBase\n  });\n};\n\nexport const deleteCurrentMessageInDataBase = async (messageTime) => {\n  await fetch(\"http://localhost:8080/deletecurrentmessage\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ rawTime: messageTime }),\n  }).catch(() => {\n    // console.log(error);\n  });\n};\n\nexport const deleteConversationInDataBase = async (user, friend) => {\n  console.log(\"xxxxxxxx\");\n  await fetch(\"http://localhost:8080/deleteconversation\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ from: user, to: friend }),\n  }).catch(() => {\n    // console.log(error);\n  });\n};\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable no-console */\nimport React, { Component } from \"react\";\nimport NavigationBar from \"./NavigationBar\";\nimport Contacts from \"./Contacts\";\nimport TopBanner from \"./TopBanner\";\nimport Chat from \"./Chat\";\nimport Strangers from \"./Stranger\";\nimport {\n  getMessage,\n  getFriends,\n  getStrangers,\n  deleteFriend,\n  addFriend,\n} from \"./getData\";\nimport Videocall from \"./Videocall\";\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      contacters: [],\n      strangers: [],\n      search: \"\",\n      searchStranger: \"\",\n      chat: [],\n      videoCall: [],\n      friend: [],\n    };\n    this.MessageSomeone = this.MessageSomeone.bind(this);\n    this.handleInputonChange = this.handleInputonChange.bind(this);\n    this.handleInputonChangeStranger = this.handleInputonChangeStranger.bind(\n      this\n    );\n    this.AddStangers = this.AddStangers.bind(this);\n    this.deleteFriend = this.deleteFriend.bind(this);\n    this.displayVideo = this.displayVideo.bind(this);\n    this.endDisplayVideo = this.endDisplayVideo.bind(this);\n  }\n\n  componentDidMount() {\n    const logo = document.getElementById(\"logox\");\n    logo.setAttribute(\"style\", \"margin-left: 100px\");\n    // const arrayOfContacts = fetchFunction();\n    // const nameAndPassword = localStorage.getItem('TOKEN_KEY').split(\",\");\n    console.log(`Curr user ${localStorage.getItem(\"currentUser\")}`);\n    console.log(`Curr Password ${localStorage.getItem(\"password\")}`);\n    // const arrayOfContacts = [\n    //   \"Liam\",\n    //   \"Noah\",\n    //   \"Oliver\",\n    //   \" William\",\n    //   \" Elijah\",\n    //   \"James\",\n    //   \"Benjamin\",\n    //   \"Lucas\",\n    //   \" Mason\",\n    //   \"Ethan\",\n    //   \" Alexander\",\n    //   \" Henry\",\n    //   \"Jacob\",\n    //   \"Michael\",\n    //   \"Daniel\",\n    //   \"Logan\",\n    //   \"Jackson\",\n    //   \"Sebastian\",\n    //   \"Jack\",\n    //   \"Aiden\",\n    // ];\n    const arrayOfContacts = [];\n    // const arrayOfStranges = [\n    //   \"Tom Cruise\",\n    //   \"Arnold Schwarzenegge\",\n    //   \"Emma Watson\",\n    //   \"Daniel Radcliffe\",\n    //   \"Morgan Freeman\",\n    // ];\n\n    const arrayOfStranges = [];\n\n    getFriends(localStorage.getItem(\"currentUser\")).then((response) => {\n      console.log(response);\n      for (let i = 0; i < response.length; i += 1) {\n        arrayOfContacts.push(response[i].friend);\n      }\n      console.log(arrayOfContacts);\n      this.setState({ contacters: arrayOfContacts });\n\n      getStrangers(localStorage.getItem(\"currentUser\")).then((response2) => {\n        console.log(response2);\n        for (let i = 0; i < response2.length; i += 1) {\n          if (!arrayOfContacts.includes(response2[i].username)) {\n            arrayOfStranges.push(response2[i].username);\n          }\n        }\n        console.log(arrayOfStranges);\n        this.setState({ strangers: arrayOfStranges });\n      });\n    });\n\n    // this.setState({ loginState: true });\n  }\n\n  handleInputonChange(e) {\n    e.preventDefault();\n    this.setState({ search: e.target.value });\n    const { search } = this.state;\n    console.log(search);\n  }\n\n  handleInputonChangeStranger(e) {\n    e.preventDefault();\n    this.setState({ searchStranger: e.target.value });\n    const { searchStranger } = this.state;\n    console.log(searchStranger);\n  }\n\n  MessageSomeone(friendname) {\n    this.setState({ friend: friendname });\n    if (document.getElementById(\"showimgArea\") !== null) {\n      document.getElementById(\"showimgArea\").setAttribute(\"src\", \"\");\n    }\n    this.setState({ chat: \"\" });\n    console.log(this.arrayOfContacts);\n    console.log(\"sending Message to someone\");\n    console.log(`Talk to ${friendname}`);\n    console.log(`Curr user ${this.props.username}`);\n    const time = new Date();\n\n    // ////////////////////////////////////////////////\n    getMessage(localStorage.getItem(\"currentUser\"), friendname).then(\n      (response) => {\n        // console.log(\"XXXXXXXXXXXXXXXXXX\");\n        // console.log(response);\n\n        const previousMessages = [];\n\n        const messagesTemp = [];\n        const imgTemp = [];\n        const voiceTemp = [];\n        const videoTemp = [];\n\n        response.map((obj) => {\n          if (obj.message_type === \"text\") {\n            messagesTemp.push(obj);\n          } else if (obj.message_type === \"image\") {\n            const temp = JSON.parse(obj.message_content);\n            // console.log(temp);\n            imgTemp.push(temp);\n\n            const mc = JSON.parse(obj.message_content);\n            const urlTemp = URL.createObjectURL(\n              new Blob([Buffer.from(mc.buffer)])\n            );\n            // eslint-disable-next-line no-param-reassign\n            obj.message_content = urlTemp;\n          } else if (obj.message_type === \"video\") {\n            const temp = JSON.parse(obj.message_content);\n            videoTemp.push(temp);\n\n            const mc = JSON.parse(obj.message_content);\n            const urlTemp = URL.createObjectURL(\n              new Blob([Buffer.from(mc.buffer)])\n            );\n            // eslint-disable-next-line no-param-reassign\n            obj.message_content = urlTemp;\n          } else if (obj.message_type === \"audio\") {\n            const temp = JSON.parse(obj.message_content);\n            voiceTemp.push(temp);\n\n            const mc = JSON.parse(obj.message_content);\n            const urlTemp = URL.createObjectURL(\n              new Blob([Buffer.from(mc.buffer)])\n            );\n            // eslint-disable-next-line no-param-reassign\n            obj.message_content = urlTemp;\n          } else {\n            // console.log(\"The message type is incorrect\");\n          }\n          // obj.message_content = urlTemp;\n          previousMessages.push(obj);\n          return \"\";\n        });\n\n        const ChatComponent = (\n          <Chat\n            from={localStorage.getItem(\"currentUser\")}\n            to={friendname}\n            currentMessage={[]}\n            time={time}\n            // eslint-disable-next-line react/no-access-state-in-setstate\n            previousMessages={previousMessages}\n            displayVideo={this.displayVideo}\n          />\n        );\n        this.setState({ chat: ChatComponent });\n      }\n    );\n  }\n\n  deleteFriend(name) {\n    const { contacters, strangers } = this.state;\n    const filteredStangers = strangers;\n    filteredStangers.push(name);\n    const filteredcontacters = contacters.filter((friend) => {\n      if (friend !== name) {\n        return friend;\n      }\n      return \"\";\n    });\n    this.setState({ contacters: filteredcontacters });\n    this.setState({ strangers: filteredStangers });\n\n    deleteFriend(localStorage.getItem(\"currentUser\"), name);\n  }\n\n  AddStangers(name) {\n    const { contacters, strangers } = this.state;\n    const filteredcontacters = contacters;\n    filteredcontacters.push(name);\n    //  console.log(filteredcontacters);\n    const filteredStangers = strangers.filter((friend) => {\n      if (friend !== name) {\n        return friend;\n      }\n      return \"\";\n    });\n    this.setState({ contacters: filteredcontacters });\n    this.setState({ strangers: filteredStangers });\n\n    addFriend(localStorage.getItem(\"currentUser\"), name);\n  }\n\n  displayVideo() {\n    const videoCallDiv = (\n      <Videocall\n        username={localStorage.getItem(\"currentUser\")}\n        endDisplayVideo={this.endDisplayVideo}\n        // eslint-disable-next-line react/no-access-state-in-setstate\n        friend={this.state.friend}\n      />\n    );\n    this.setState({ videoCall: videoCallDiv });\n    document.getElementById(\"addingContacts\").style.display = \"none\";\n  }\n\n  endDisplayVideo() {\n    // navigator.mediaDevices\n    //   .getUserMedia({ video: true, audio: false })\n    //   .then((mediaStream) => {\n    //     const stream = mediaStream;\n    //     const tracks = stream.getTracks();\n    //     tracks[0].stop;\n    //   });\n    this.setState({ videoCall: [] });\n    document.getElementById(\"addingContacts\").style.display = \"block\";\n  }\n\n  renderPeople(stranger) {\n    return (\n      <div className=\"col-md-3\" style={{ marginTop: \"20px\" }}>\n        <Strangers name={stranger} AddStangers={this.AddStangers} />\n      </div>\n    );\n  }\n\n  renderFriend(friend) {\n    return (\n      <div className=\"col-md-3\" style={{ marginTop: \"20px\" }}>\n        <Contacts\n          name={friend}\n          messageSomeone={this.MessageSomeone}\n          deleteFriend={this.deleteFriend}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    const {\n      search,\n      contacters,\n      searchStranger,\n      strangers,\n      videoCall,\n    } = this.state;\n    const filteredarrayOfContacts = contacters.filter((friend) => {\n      return friend.toLowerCase().indexOf(search.toLowerCase()) !== -1;\n    });\n\n    const filteredarrayOfAddPeople = strangers.filter((stranger) => {\n      return (\n        stranger.toLowerCase().indexOf(searchStranger.toLowerCase()) !== -1\n      );\n    });\n\n    return (\n      <div>\n        <TopBanner />\n        <NavigationBar />\n\n        <div id=\"homeMainSection\">\n          <div id=\"page\">\n            <div id=\"videoCall\">{videoCall}</div>\n            <div id=\"addingContacts\">\n              <div id=\"searchBox\">\n                <span id=\"searchLabel\">Search</span>\n                <input\n                  label=\"Search Friend\"\n                  icon=\"search\"\n                  onChange={this.handleInputonChange}\n                />\n              </div>\n              <div id=\"listOfContacts\">\n                {filteredarrayOfContacts.map((friend) => {\n                  return this.renderFriend(friend);\n                })}\n              </div>\n              <div id=\"AddContact\">\n                <div id=\"searchBoxStranger\">\n                  <span id=\"searchLabel\">Explore New People</span>\n                  <input\n                    label=\"Add Strangers\"\n                    icon=\"search\"\n                    onChange={this.handleInputonChangeStranger}\n                  />\n                </div>\n                <div id=\"PeopleToAdd\">\n                  {filteredarrayOfAddPeople.map((stranger) => {\n                    return this.renderPeople(stranger);\n                  })}\n                </div>\n              </div>\n            </div>\n          </div>\n          <div id=\"chatBox\">{this.state.chat}</div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Home;\n","import { Avatar } from \"@material-ui/core\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport logo from \"../images/messenger.svg\";\n\nclass TopBanner extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n  }\n\n  render() {\n    return (\n      <header id=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <span className=\"AppTitle\" id=\"logox\">\n          {\" \"}\n          Video & Messaging Web App\n        </span>\n        <Link to=\"/profile\" id=\"loginLink\">\n          <Avatar\n            id=\"avatar\"\n            src=\"https://i.pinimg.com/originals/57/82/2c/57822cd7a504b0d5ab8e0f6983a063de.jpg\"\n          />\n        </Link>\n      </header>\n    );\n  }\n}\n\nexport default TopBanner;\n","import MicIcon from \"@material-ui/icons/Mic\";\nimport StopIcon from \"@material-ui/icons/Stop\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport ImageIcon from \"@material-ui/icons/Image\";\nimport MovieIcon from \"@material-ui/icons/Movie\";\nimport HighlightOffOutlinedIcon from \"@material-ui/icons/HighlightOffOutlined\";\nimport React, { useState, useEffect } from \"react\";\nimport {\n  joinChat,\n  sendMessage,\n  sendImage,\n  sendAudio,\n  sendVideo,\n  deleteMessageInDataBase,\n  deleteCurrentMessageInDataBase,\n  deleteConversationInDataBase,\n} from \"./getData\";\nimport { setupWSConnection } from \"./notifications\";\n/* eslint-disable  */\n\nfunction Chat(props) {\n  // eslint-disable-next-line no-unused-vars\n  const [contacts, setContacts] = useState(0); // number of connected users\n  // eslint-disable-next-line no-unused-vars\n  const [messages, setMessages] = useState(0); // counts messages sent and received - lift up state\n\n  const {\n    previousMessages,\n    currentMessage,\n    time,\n    from,\n    to,\n    displayVideo,\n  } = props;\n  console.log(displayVideo);\n  // eslint-disable-next-line no-shadow\n  const updateContacts = () => setContacts((contacts) => contacts + 1);\n  // eslint-disable-next-line no-shadow\n  const updateMessages = () => setMessages((messages) => messages + 1);\n\n  const authenticate = async () => {\n    if (sessionStorage.getItem(\"token\") === null) {\n      const token = await joinChat(localStorage.getItem(\"currentUser\")); // get the token (jwt) from the web server\n      if (token) {\n        sessionStorage.setItem(\"token\", token); // store token in session storage\n      }\n    }\n    setupWSConnection(\n      updateContacts,\n      updateMessages,\n      currentMessage,\n      localStorage.getItem(\"currentUser\")\n    ); // setup ws connection -- pass the wrapper functions as parameters\n    // eslint-disable-next-line no-shadow\n    setContacts((contacts) => contacts + 1); // update state to trigger re-rendering and useEffect\n  };\n\n  useEffect(() => {\n    authenticate();\n\n    const cleanup = () => {\n      sessionStorage.removeItem(\"token\"); // clean the session storage\n    };\n    // we need to cleanup when leaving the tab\n    window.addEventListener(\"beforeunload\", cleanup);\n\n    return () => {\n      window.removeEventListener(\"beforeunload\", cleanup);\n    };\n  }, [time]);\n\n  // we pass the messages to the child as props\n  // the .current property of a mutable reference\n  // contains the messages\n  return (\n    <div id=\"chatbox\">\n      {/* <UsersComponent /> */}\n      <MessagesComponent\n        currentMessageHtml={currentMessage}\n        from={from}\n        to={to}\n        previousMessages={previousMessages}\n        displayVideo={props.displayVideo}\n      />\n    </div>\n  );\n}\n\n// messages component\nfunction MessagesComponent(props) {\n  const [conversation, setconversation] = useState(0); // current audio blob\n  const conversationState = () =>\n    setconversation((conversation) => conversation + 1);\n  const { to, from } = props;\n  let stopAudioButton = function stop() {};\n  let uploadImg = function upl() {};\n  const sendMsg = () => {\n    const text = document.getElementById(\"msg\").value;\n    if (text.length > 0 && to.length > 0 && from.length > 0) {\n      sendMessage(from, to, text);\n      document.getElementById(\"msg\").value = \"\";\n    }\n  };\n\n  // handle sending img\n  const handleSendImg = (e) => {\n    if (e.target.files.length !== 0) {\n      if (e.target.files[0].size > 3800000) {\n        // eslint-disable-next-line no-alert\n        alert(\"File is too big!\");\n        e.target.value = \"\";\n      } else {\n        // setimgState(e.target.files[0]);\n        const reader = new FileReader();\n        // eslint-disable-next-line func-names\n        reader.onload = function () {\n          const img = new Image();\n          img.src = reader.result;\n          document.getElementById(\"showingArea\").setAttribute(\"src\", img.src);\n\n          const imgURL = img.src;\n          uploadImg = function upload() {\n            if (imgURL.length > 0 && to.length > 0 && from.length > 0) {\n              sendImage(from, to, e.target.files[0]);\n              document.getElementById(\"showingArea\").setAttribute(\"src\", \"\");\n              document.getElementById(\"imgInput\").value = null;\n            }\n          };\n        };\n        reader.readAsDataURL(e.target.files[0]);\n      }\n    }\n  };\n\n  // sending audio\n\n  const audioButton = () => {\n    document.getElementById(\"stopbtn\").setAttribute(\"style\", \"display: inline\");\n    const device = navigator.mediaDevices.getUserMedia({ audio: true });\n    const items = [];\n    device.then((stream) => {\n      window.streamReference = stream;\n      const recorder = new MediaRecorder(stream);\n      recorder.ondataavailable = (e) => {\n        items.push(e.data);\n        if (recorder.state === \"inactive\") {\n          const blob = new Blob(items, { type: \"audio/webm\" });\n          const audio = document.getElementById(\"audioMessageDiv\");\n          const mainaudio = document.createElement(\"audio\");\n          mainaudio.setAttribute(\"controls\", \"controls\");\n          mainaudio.setAttribute(\"id\", \"audioMessage\");\n          if (document.getElementById(\"audioMessage\") !== null) {\n            document.getElementById(\"audioMessage\").remove();\n          }\n          audio.appendChild(mainaudio);\n          mainaudio.innerHTML = `<source src=\" ${URL.createObjectURL(\n            blob\n          )}\" type= \"video/webm\" />`;\n\n          setaudioState(blob);\n        }\n      };\n      recorder.start(100);\n\n      stopAudioButton = function x() {\n        recorder.stop();\n        if (!window.streamReference) return;\n        window.streamReference.getAudioTracks().forEach(function y(track) {\n          track.stop();\n        });\n        window.streamReference = null;\n        document\n          .getElementById(\"stopbtn\")\n          .setAttribute(\"style\", \"display: none\");\n      };\n    });\n  };\n\n  const uploadAudio = function z() {\n    sendAudio(from, to, audioState);\n    if (document.getElementById(\"audioMessage\") !== null) {\n      document.getElementById(\"audioMessage\").remove();\n    }\n  };\n\n  // sending video\n  const handleSendVideo = (e) => {\n    if (e.target.files.length !== 0) {\n      if (e.target.files[0].size > 3800000) {\n        // eslint-disable-next-line no-alert\n        alert(\"File is too big!\");\n        e.target.value = \"\";\n      } else {\n        const reader = new FileReader();\n        // eslint-disable-next-line func-names\n        reader.onload = function () {\n          // console.log(reader.result);\n          const videoMessageDiv = document.getElementById(\"videoMessageDiv\");\n          const thevideo = document.createElement(\"video\");\n          thevideo.setAttribute(\"id\", \"videoMessage\");\n          thevideo.setAttribute(\"controls\", \"controls\");\n          thevideo.style.maxHeight = \"100px\";\n          thevideo.style.maxWidth = \"200px\";\n          if (document.getElementById(\"videoMessage\") !== null) {\n            document.getElementById(\"videoMessage\").remove();\n          }\n          videoMessageDiv.appendChild(thevideo);\n          thevideo.innerHTML = `<source src=\" ${reader.result}\" type= \"video/mp4\" />`;\n          setVideoState(e.target.files[0]);\n        };\n        reader.readAsDataURL(e.target.files[0]);\n      }\n    }\n  };\n\n  const uploadVideo = function up() {\n    sendVideo(from, to, videoState);\n    if (document.getElementById(\"videoMessage\") !== null) {\n      document.getElementById(\"videoMessage\").remove();\n      document.getElementById(\"videoInput\").value = null;\n    }\n  };\n\n  function processAt(message_content) {\n    let message_content_temp = <div>{message_content}</div>;\n    const index1 = message_content.indexOf(\"@\");\n    if (index1 >= 0) {\n      let index2 = message_content.indexOf(\" \", index1 + 1);\n      if (index2 == -1) {\n        index2 = message_content.length;\n      }\n      if (index2 == index1 + 1) {\n        message_content_temp = <div>{message_content}</div>;\n      } else {\n        const name_at = message_content.substring(index1 + 1, index2);\n        const url = `http://localhost:3000/profileOther/${name_at}`;\n        message_content_temp = (\n          // <div> <a href=\"http://localhost:3000/profileOther/Lili\" target=\"_blank\">@Lili</a></div>\n          <div>\n            {message_content.substring(0, index1)}\n            <a href={url} target=\"_blank\">\n              @{name_at}\n            </a>\n            {message_content.substring(index2)}\n          </div>\n        );\n      }\n    } else {\n      message_content_temp = <div>{message_content}</div>;\n    }\n    return message_content_temp;\n  }\n\n  function processAt_2(message_content) {\n    // let message_content_temp_str = `<div>${message_content}</div>`;\n    let message_content_temp_str = `${message_content}`;\n    const index1 = message_content.indexOf(\"@\");\n    if (index1 >= 0) {\n      let index2 = message_content.indexOf(\" \", index1 + 1);\n      if (index2 == -1) {\n        index2 = message_content.length;\n      }\n      if (index2 == index1 + 1) {\n        // message_content_temp_str = `<div>${message_content}</div>`;\n        message_content_temp_str = `${message_content}`;\n      } else {\n        const message_at_array = message_content.split(\"@\");\n        let index3;\n        let name_at;\n        let url;\n        let message_content_temp_str = message_at_array[0];\n        for (let i = 1; i < message_at_array.length; i += 1) {\n          index3 = message_at_array[i].indexOf(\" \");\n          if (index3 == -1) {\n            index3 = message_at_array[i].length;\n          }\n          name_at = message_at_array[i].substring(0, index3);\n          url = `http://localhost:3000/profileOther/${name_at}`;\n          message_content_temp_str += `<a href=${url} target=\"_blank\">@${name_at}</a>`;\n          message_content_temp_str += message_at_array[i].substring(index3);\n        }\n        // message_content_temp_str = \"<div>\" + message_content_temp_str + \"</div>\";\n        return { __html: message_content_temp_str };\n      }\n    } else {\n      // message_content_temp_str = `<div>${message_content}</div>`;\n      message_content_temp_str = `${message_content}`;\n    }\n    return { __html: message_content_temp_str };\n  }\n\n  const { previousMessages, currentMessageHtml, displayVideo } = props;\n  let previousMessagesCopy = previousMessages;\n  let currentMessageHtmlCopy = currentMessageHtml;\n\n  const deleteMessage = function (time) {\n    // console.log(time);\n    for (let i = 0; i < previousMessagesCopy.length; i += 1) {\n      if (\n        previousMessagesCopy[i] !== null &&\n        previousMessagesCopy[i].message_time === time\n      ) {\n        console.log(\"find it\");\n        deleteMessageInDataBase(previousMessagesCopy[i].mid);\n        previousMessagesCopy.splice(i, 1);\n      }\n    }\n\n    for (let i = 0; i < currentMessageHtmlCopy.length; i += 1) {\n      console.log(currentMessageHtmlCopy[i].rawtime);\n\n      if (\n        currentMessageHtmlCopy[i] !== null &&\n        currentMessageHtmlCopy[i].message_time === time\n      ) {\n        console.log(\"find it\");\n        deleteCurrentMessageInDataBase(currentMessageHtmlCopy[i].rawtime);\n        currentMessageHtmlCopy.splice(i, 1);\n      }\n    }\n    conversationState();\n  };\n\n  const deleteConversation = function () {\n    conversationState();\n    deleteConversationInDataBase(props.from, props.to);\n    for (let i = 0; i < previousMessagesCopy.length; i += 1) {\n      previousMessagesCopy[i] = null;\n    }\n    for (let i = 0; i < currentMessageHtmlCopy.length; i += 1) {\n      currentMessageHtmlCopy[i] = null;\n    }\n  };\n\n  const handleVideoCall = function () {\n    // window.top.location = \"http://localhost:3000/videocall\";\n    displayVideo();\n  };\n\n  return (\n    <div>\n      <div>\n        <label>Talking To: </label>\n        {/* <div> <a href=\"http://localhost:3000/profileOther/Lili\" target=\"_blank\">@Lili</a></div> */}\n        <span>{to}</span>\n        <div id=\"displayDiv\">\n          <div>\n            {previousMessagesCopy.map((msg) => {\n              if (msg !== null) {\n                if (msg.from_host === props.from) {\n                  if (msg.message_type === \"text\") {\n                    return (\n                      <div className=\"bubbleRight\">\n                        <span className=\"timeCssRight\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        <div\n                          dangerouslySetInnerHTML={processAt_2(\n                            msg.message_content\n                          )}\n                        />\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                  if (msg.message_type === \"video\") {\n                    return (\n                      <div className=\"bubbleRight\">\n                        <span className=\"timeCssRight\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        <video\n                          className=\"video\"\n                          controls=\"controls\"\n                          src={msg.message_content}\n                        />\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                  if (msg.message_type === \"image\") {\n                    return (\n                      <div className=\"bubbleRight\">\n                        <span className=\"timeCssRight\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        <img\n                          width=\"100\"\n                          height=\"100\"\n                          src={msg.message_content}\n                          alt=\"\"\n                        />\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                  if (msg.message_type === \"audio\") {\n                    return (\n                      <div className=\"bubbleRight\">\n                        <span className=\"timeCssRight\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        <audio\n                          className=\"audio\"\n                          controls=\"controls\"\n                          src={msg.message_content}\n                        />\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                } else {\n                  if (msg.message_type === \"text\") {\n                    return (\n                      <div className=\"bubbleLeft\">\n                        <span className=\"timeCssLeft\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        {msg.message_content}\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                  if (msg.message_type === \"video\") {\n                    return (\n                      <div className=\"bubbleLeft\">\n                        <span className=\"timeCssLeft\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        <video\n                          className=\"video\"\n                          controls=\"controls\"\n                          src={msg.message_content}\n                        />\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                  if (msg.message_type === \"image\") {\n                    return (\n                      <div className=\"bubbleLeft\">\n                        <span className=\"timeCssLeft\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        <img\n                          width=\"100\"\n                          height=\"100\"\n                          src={msg.message_content}\n                          alt=\"\"\n                        />\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                  if (msg.message_type === \"audio\") {\n                    return (\n                      <div className=\"bubbleLeft\">\n                        <span className=\"timeCssLeft\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        <audio\n                          className=\"audio\"\n                          controls=\"controls\"\n                          src={msg.message_content}\n                        />\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                }\n              }\n            })}\n          </div>\n\n          <div>\n            {currentMessageHtmlCopy.map((msg) => {\n              if (msg !== null) {\n                if (msg.from_host === props.from) {\n                  if (msg.message_type === \"text\") {\n                    return (\n                      <div className=\"bubbleRight\">\n                        <span className=\"timeCssRight\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        <div\n                          dangerouslySetInnerHTML={processAt_2(\n                            msg.message_content\n                          )}\n                        />\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                  if (msg.message_type === \"video\") {\n                    return (\n                      <div className=\"bubbleRight\">\n                        <span className=\"timeCssRight\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        <video\n                          className=\"video\"\n                          controls=\"controls\"\n                          src={msg.message_content}\n                        />\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                  if (msg.message_type === \"image\") {\n                    return (\n                      <div className=\"bubbleRight\">\n                        <span className=\"timeCssRight\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        <img\n                          width=\"100\"\n                          height=\"100\"\n                          src={msg.message_content}\n                          alt=\"\"\n                        />\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                  if (msg.message_type === \"audio\") {\n                    return (\n                      <div className=\"bubbleRight\">\n                        <span className=\"timeCssRight\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        <audio\n                          className=\"audio\"\n                          controls=\"controls\"\n                          src={msg.message_content}\n                        />\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                } else {\n                  if (msg.message_type === \"text\") {\n                    return (\n                      <div className=\"bubbleLeft\">\n                        <span className=\"timeCssLeft\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        {msg.message_content}\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                  if (msg.message_type === \"video\") {\n                    return (\n                      <div className=\"bubbleLeft\">\n                        <span className=\"timeCssLeft\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        <video\n                          className=\"video\"\n                          controls=\"controls\"\n                          src={msg.message_content}\n                        />\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                  if (msg.message_type === \"image\") {\n                    return (\n                      <div className=\"bubbleLeft\">\n                        <span className=\"timeCssLeft\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        <img\n                          width=\"100\"\n                          height=\"100\"\n                          src={msg.message_content}\n                          alt=\"\"\n                        />\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                  if (msg.message_type === \"audio\") {\n                    return (\n                      <div className=\"bubbleLeft\">\n                        <span className=\"timeCssLeft\">\n                          {`${\n                            msg.message_time.split(\"T\")[0]\n                          } ${msg.message_time.split(\"T\")[1].substr(0, 8)}`}\n                        </span>\n                        <br />\n                        <audio\n                          className=\"audio\"\n                          controls=\"controls\"\n                          src={msg.message_content}\n                        />\n                        <button onClick={() => deleteMessage(msg.message_time)}>\n                          <HighlightOffOutlinedIcon />\n                        </button>\n                      </div>\n                    );\n                  }\n                }\n              }\n            })}\n          </div>\n        </div>\n      </div>\n      <div>\n        <label>Current User: </label>\n        <span>{from}</span>\n      </div>\n      <div>\n        <div id=\"MessageBox\">\n          <textarea\n            cols=\"10\"\n            rows=\"5\"\n            id=\"msg\"\n            placeholder=\"Type here/ Preview Section\"\n          />\n          <div id=\"displayArea\">\n            <div id=\"imageMessageDiv\">\n              <img id=\"showingArea\" alt=\"\" />\n            </div>\n            <div id=\"videoMessageDiv\"> </div>\n          </div>\n          <button\n            type=\"button\"\n            id=\"messagebtn\"\n            className=\"button\"\n            onClick={() => sendMsg()}\n          >\n            <SendIcon />\n          </button>\n          <button\n            type=\"button\"\n            id=\"videocallbtn\"\n            className=\"button\"\n            onClick={() => displayVideo()}\n          >\n            Video Call\n          </button>\n          <button\n            type=\"submit\"\n            id=\"deleteCoversationButton\"\n            onClick={() => deleteConversation()}\n          >\n            Delete the conversation\n          </button>\n        </div>\n        <div id=\"messageAndImgeButton\">\n          <input\n            id=\"imgInput\"\n            type=\"file\"\n            name=\"attachment[0][uploaded_data]\"\n            onChange={(e) => handleSendImg(e)}\n            accept=\".jpg\"\n          />\n          <button type=\"button\" className=\"button\" onClick={() => uploadImg()}>\n            <ImageIcon />\n          </button>\n        </div>\n      </div>\n      <div id=\"audio\">\n        <button type=\"button\" className=\"button\" onClick={() => audioButton()}>\n          <MicIcon />\n        </button>\n        <button\n          type=\"submit\"\n          className=\"button\"\n          id=\"stopbtn\"\n          onClick={() => stopAudioButton()}\n        >\n          <StopIcon />\n        </button>\n\n        <button type=\"submit\" className=\"button\" onClick={() => uploadAudio()}>\n          send\n        </button>\n        <div id=\"audioMessageDiv\"> </div>\n      </div>\n      <div id=\"video\">\n        <input\n          id=\"videoInput\"\n          type=\"file\"\n          onChange={(e) => handleSendVideo(e)}\n        />\n        <button type=\"submit\" className=\"button\" onClick={() => uploadVideo()}>\n          <MovieIcon />\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default Chat;\n","/* eslint-disable*/\n\nexport const setupWSConnection = (\n  updateContacts,\n  updateMessages,\n  currentMessage,\n  host\n) => {\n  // if not registered, do nothing\n  if (sessionStorage.getItem(\"token\") === null) {\n    return;\n  }\n\n  // Create WebSocket connection\n  const socket = new WebSocket(\n    \"ws://localhost:8085\",\n    sessionStorage.getItem(\"token\")\n  );\n\n  // Connection opened\n  socket.addEventListener(\"open\", () => {\n    console.log(\"ws connection opened\");\n    socket.send(\"Hello Server!\");\n  });\n\n  // Listener for messages\n  socket.addEventListener(\"message\", (event) => {\n    // parse message to json\n    const pushMessage = JSON.parse(event.data);\n    // console.log(\"Message from server \", pushMessage);\n    if (pushMessage.type === \"new user\") {\n      console.log(\"user \" + pushMessage.user);\n      updateContacts(); // update contacts to fire re-rendering\n    }\n    if (pushMessage.type === \"delivered\") {\n      const time = new Date().toISOString().slice(0, 19);\n      currentMessage.push({\n        from_host: host,\n        message_type: \"text\",\n        message_content: ` ${pushMessage.text}`,\n        message_time: `${time}`,\n        rawtime: `${pushMessage.time}`,\n      });\n      console.log(currentMessage);\n      // update previous message box via state and props\n      updateMessages(); // update messages to fire re-rendering\n    }\n    if (pushMessage.type === \"new message\") {\n      console.log(\"new message\");\n      const time = new Date().toISOString().slice(0, 19);\n      currentMessage.push({\n        from_host: \"friend\",\n        message_type: \"text\",\n        message_content: ` ${pushMessage.text}`,\n        message_time: `${time}`,\n        rawtime: `${pushMessage.time}`,\n      });\n      console.log(currentMessage);\n      // update previous message box via state and props\n      updateMessages(); // update messages to fire re-rendering\n    }\n\n    //handle images\n    if (pushMessage.type === \"image delivered\") {\n      const blob = new Blob([Buffer.from(pushMessage.imgUrl.buffer)]);\n      const time = new Date().toISOString().slice(0, 19);\n      currentMessage.push({\n        from_host: host,\n        message_type: \"image\",\n        message_content: `${URL.createObjectURL(blob)}`,\n        message_time: `${time}`,\n      });\n      // update previous message box via state and props\n      updateMessages(); // update messages to fire re-rendering\n    }\n    if (pushMessage.type === \"new image message\") {\n      console.log(\"new image message\");\n      const blob = new Blob([Buffer.from(pushMessage.imgUrl.buffer)]);\n      const time = new Date().toISOString().slice(0, 19);\n      currentMessage.push({\n        from_host: \"friend\",\n        message_type: \"image\",\n        message_content: `${URL.createObjectURL(blob)}`,\n        message_time: `${time}`,\n      });\n      console.log(currentMessage);\n      // update previous message box via state and props\n      updateMessages(); // update messages to fire re-rendering  img delivered\n    }\n\n    //handle aduio\n    if (pushMessage.type === \"aduio delivered\") {\n      console.log(\"aduio delivered\");\n\n      // console.log(Buffer.from(pushMessage.audiofile.buffer));\n      const blob = new Blob([Buffer.from(pushMessage.audiofile.buffer)]);\n      const time = new Date().toISOString().slice(0, 19);\n      currentMessage.push({\n        from_host: host,\n        message_type: \"audio\",\n        message_content: `${URL.createObjectURL(blob)}`,\n        message_time: `${time}`,\n      });\n      // update previous message box via state and props\n      updateMessages(); // update messages to fire re-rendering\n    }\n    if (pushMessage.type === \"new audio message\") {\n      console.log(\"new audio message\");\n\n      const blob = new Blob([Buffer.from(pushMessage.audiofile.buffer)]);\n      const time = new Date().toISOString().slice(0, 19);\n      currentMessage.push({\n        from_host: \"friend\",\n        message_type: \"audio\",\n        message_content: `${URL.createObjectURL(blob)}`,\n        message_time: `${time}`,\n      });\n      updateMessages(); // update messages to fire re-rendering  img delivered\n    }\n    //handle video\n    if (pushMessage.type === \"video delivered\") {\n      console.log(\"aduio delivered\");\n\n      const blob = new Blob([Buffer.from(pushMessage.videofile.buffer)]);\n      const time = new Date().toISOString().slice(0, 19);\n      currentMessage.push({\n        from_host: host,\n        message_type: \"video\",\n        message_content: `${URL.createObjectURL(blob)}`,\n        message_time: `${time}`,\n      });\n      // // update previous message box via state and props\n      updateMessages(); // update messages to fire re-rendering\n    }\n    if (pushMessage.type === \"new video message\") {\n      console.log(\"new audio message\");\n\n      // const videoblob = new Blob([Buffer.from(pushMessage.videofile.buffer)]);\n      const blob = new Blob([Buffer.from(pushMessage.videofile.buffer)]);\n      const time = new Date().toISOString().slice(0, 19);\n      currentMessage.push({\n        from_host: \"friend\",\n        message_type: \"video\",\n        message_content: `${URL.createObjectURL(blob)}`,\n        message_time: `${time}`,\n      });\n      updateMessages(); // update messages to fire re-rendering  img delivered\n    }\n  });\n\n  // Connection closed\n  socket.addEventListener(\"close\", (_event) => {\n    console.log(\"Connection closed bye bye! \");\n  });\n};\n","import React, { Component } from \"react\";\nimport { Avatar } from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\n\nclass Stangers extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n  }\n\n  render() {\n    const { AddStangers } = this.props;\n    const { name } = this.props;\n    return (\n      <div className=\"contactBox\">\n        <Avatar\n          className=\"stangerAvater\"\n          src=\"https://img.favpng.com/6/14/19/computer-icons-user-profile-icon-design-png-favpng-vcvaCZNwnpxfkKNYzX3fYz7h2.jpg\"\n        />\n        <button\n          className=\"addFriend\"\n          type=\"submit\"\n          onClick={() => {\n            AddStangers(name);\n          }}\n        >\n          <svg\n            width=\"1em\"\n            height=\"1em\"\n            viewBox=\"0 0 16 16\"\n            className=\"bi bi-person-plus-fill\"\n            fill=\"currentColor\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              fillRule=\"evenodd\"\n              d=\"M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm7.5-3a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z\"\n            />\n          </svg>\n        </button>\n        <div className=\"strangers\" id={name}>\n          {name}\n        </div>\n      </div>\n    );\n  }\n}\n\nStangers.propTypes = {\n  name: PropTypes.string.isRequired,\n  AddStangers: PropTypes.func.isRequired,\n};\n\nexport default Stangers;\n","/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-no-bind */\nimport React, { Component } from \"react\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport AddBoxOutlinedIcon from \"@material-ui/icons/AddBoxOutlined\";\nimport { DropzoneArea } from \"material-ui-dropzone\";\n\n// import PropTypes from \"prop-types\";\nimport NavigationBar from \"./NavigationBar\";\nimport { postStory, getStory } from \"./getData\";\nimport Post from \"./Post\";\n\nclass Story extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      imgeFile: \"\",\n      Story: [],\n      dropBoxStyle: \"none\",\n      PostButtonStyle: \"inline\",\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.hanldeSubmit = this.hanldeSubmit.bind(this);\n    this.handledisplayDropBox = this.handledisplayDropBox.bind(this);\n    this.handleCloseDropBox = this.handleCloseDropBox.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(\"componentDidMount\");\n    const { username } = this.props;\n    getStory(username).then((res) => {\n      const story = res.map((obj) => {\n        const friendName = obj.friend;\n        const mc = JSON.parse(obj.img_content);\n        let urlTemp = \"\";\n        if (mc !== null) {\n          urlTemp = URL.createObjectURL(new Blob([Buffer.from(mc.buffer)]));\n          // console.log(Buffer.from(mc.buffer));\n        }\n        const messageContent = obj.message_content;\n        const time = `${\n          obj.message_time.split(\"T\")[0]\n        } ${obj.message_time.split(\"T\")[1].substr(0, 8)}`;\n        return (\n          <Post\n            name={friendName}\n            textCotent={messageContent}\n            imgContent={urlTemp}\n            postTime={time}\n          />\n        );\n      });\n      this.setState({ Story: story });\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  handleChange(files) {\n    if (files.length !== 0) {\n      if (files[0].size > 3800000) {\n        // eslint-disable-next-line no-alert\n        alert(\"File is too big!\");\n      } else {\n        this.setState({ imgeFile: files[0] });\n      }\n    }\n  }\n\n  handledisplayDropBox() {\n    this.setState({ dropBoxStyle: \"inline\" });\n    this.setState({ PostButtonStyle: \"none\" });\n  }\n\n  handleCloseDropBox() {\n    this.setState({ dropBoxStyle: \"none\" });\n    this.setState({ PostButtonStyle: \"inline\" });\n  }\n\n  hanldeSubmit() {\n    const { imgeFile } = this.state;\n    const { username } = this.props;\n    const text = document.getElementById(\"text\").value;\n    // console.log(text);\n    console.log(username);\n    if (text.length !== 0 || imgeFile !== \"\") {\n      postStory(username, text, imgeFile);\n    }\n  }\n\n  render() {\n    const { dropBoxStyle, PostButtonStyle } = this.state;\n    return (\n      <div>\n        <NavigationBar />\n        <div id=\"postStory\" style={{ display: dropBoxStyle }}>\n          <textarea\n            id=\"text\"\n            cols=\"50\"\n            rows=\"5\"\n            placeholder=\"Share Your Story Here\"\n          />\n          <div id=\"dropbox\">\n            <DropzoneArea\n              id=\"dropbox\"\n              acceptedFiles={[\"image/jpeg\", \"image/png\", \"image/bmp\"]}\n              maxFileSize={3800000}\n              filesLimit={1}\n              onChange={this.handleChange.bind(this)}\n            />\n          </div>\n          <button type=\"submit\" onClick={() => this.hanldeSubmit()}>\n            <AddBoxOutlinedIcon />\n          </button>\n          <button\n            id=\"closeDropBox\"\n            type=\"submit\"\n            onClick={() => this.handleCloseDropBox()}\n          >\n            <CloseIcon />\n          </button>\n        </div>\n        <button\n          id=\"displayDropBox\"\n          type=\"submit\"\n          style={{ display: PostButtonStyle }}\n          onClick={() => this.handledisplayDropBox()}\n        >\n          Share a Post\n        </button>\n\n        <div id=\"StoryDiv\">{this.state.Story}</div>\n      </div>\n    );\n  }\n}\n\nStory.propTypes = {};\n\nexport default Story;\n","/* eslint-disable jsx-a11y/alt-text */\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass Post extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    const { name, textCotent, imgContent, postTime } = this.props;\n    return (\n      <div className=\"Post\">\n        <div>{name}</div>\n        <div>{textCotent}</div>\n        <div>\n          <img width=\"300\" height=\"200\" src={`${imgContent}`} alt=\"\" />\n        </div>\n        <div>{`${postTime}`}</div>\n      </div>\n    );\n  }\n}\n\nPost.propTypes = {\n  name: PropTypes.string.isRequired,\n  // eslint-disable-next-line react/forbid-prop-types\n  textCotent: PropTypes.string.isRequired,\n  imgContent: PropTypes.string.isRequired,\n  postTime: PropTypes.string.isRequired,\n};\n\nexport default Post;\n","export default __webpack_public_path__ + \"static/media/chat.634357c2.png\";","import React, { Component } from \"react\";\nimport { Avatar } from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport chat from \"../images/chat.png\";\n\nclass Contacts extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n  }\n\n  render() {\n    const { messageSomeone, deleteFriend } = this.props;\n    const { name } = this.props;\n    return (\n      <div className=\"contactBox\">\n        <Avatar\n          className=\"friendavatar\"\n          src=\"https://img.favpng.com/6/14/19/computer-icons-user-profile-icon-design-png-favpng-vcvaCZNwnpxfkKNYzX3fYz7h2.jpg\"\n        />\n        <button\n          className=\"messageButton\"\n          type=\"submit\"\n          onClick={() => {\n            messageSomeone(name);\n          }}\n        >\n          <img id=\"messageImage\" src={chat} alt=\"message\" />\n        </button>\n        <button\n          type=\"button\"\n          className=\"deleteFriend\"\n          onClick={() => deleteFriend(name)}\n        >\n          {\" \"}\n          <svg\n            width=\"1em\"\n            height=\"1em\"\n            viewBox=\"0 0 16 16\"\n            className=\"bi bi-person-x-fill\"\n            fill=\"currentColor\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              fillRule=\"evenodd\"\n              d=\"M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6.146-2.854a.5.5 0 0 1 .708 0L14 6.293l1.146-1.147a.5.5 0 0 1 .708.708L14.707 7l1.147 1.146a.5.5 0 0 1-.708.708L14 7.707l-1.146 1.147a.5.5 0 0 1-.708-.708L13.293 7l-1.147-1.146a.5.5 0 0 1 0-.708z\"\n            />\n          </svg>\n        </button>\n        <div className=\"contacts\" id={name}>\n          {name}\n        </div>\n      </div>\n    );\n  }\n}\n\nContacts.propTypes = {\n  name: PropTypes.string.isRequired,\n  messageSomeone: PropTypes.func.isRequired,\n  deleteFriend: PropTypes.func.isRequired,\n};\n\nexport default Contacts;\n","/* eslint-disable no-console */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/prop-types */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable*/\nimport { Form, Input } from \"antd\";\nimport Button from \"@material-ui/core/Button\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport logo from \"../images/messenger.svg\";\n\nclass RegistrationForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      flag: false,\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.validateToNextPassword = this.validateToNextPassword.bind(this);\n    this.compareToFirstPassword = this.compareToFirstPassword.bind(this);\n    this.handleConfirmBlur = this.handleConfirmBlur.bind(this);\n  }\n\n  /* istanbul ignore next */\n  // timer() {\n  //   setTimeout(function () {\n  //     window.top.location = \"http://localhost:3000/login\";\n  //   }, 5500);\n  // }\n\n  /* istanbul ignore next */\n  handleSubmit(e) {\n    e.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      const existedErrMessage = document.getElementById(\"errorMessage\");\n      if (existedErrMessage != null) {\n        existedErrMessage.remove();\n      }\n      if (!err) {\n        // console.log('Received values of form: ', values);\n        const requestOptions = {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            username: values.username,\n            password: values.password,\n          }),\n        };\n        // console.log(requestOptions);\n        fetch(\"http://localhost:8080/register\", requestOptions)\n          .then((res) => {\n            console.log(res.status);\n            if (res.status === 200) {\n              console.log(\"Success\");\n\n              const theForm = document.getElementById(\"RegisterForm\");\n              theForm.remove();\n              const LinktoLogin = document.createElement(\"p\");\n              LinktoLogin.innerHTML =\n                \"Registration was successful, Redirecting to Login Page\";\n              LinktoLogin.setAttribute(\"style\", \"font-size: 20px;\");\n              const RegisterDiv = document.getElementById(\"RegisterDiv\");\n              RegisterDiv.appendChild(LinktoLogin);\n              setTimeout(() => {\n                window.top.location = \"http://localhost:3000/login\";\n              }, 5500);\n            } else if (res.status === 400) {\n              const errorMessage = document.createElement(\"p\");\n              errorMessage.innerHTML = \"User Account Already Exist\";\n              errorMessage.setAttribute(\"id\", \"errorMessage\");\n              errorMessage.setAttribute(\"style\", \"color: red;\");\n              const RegisterDiv = document.getElementById(\"RegisterDiv\");\n              RegisterDiv.appendChild(errorMessage);\n              console.log(\"Not Successful\");\n            }\n          })\n          .catch(() => console.log(\"Error\"));\n      }\n    });\n  }\n\n  /* istanbul ignore next */\n  validateToNextPassword(rule, value, callback) {\n    const { form } = this.props;\n    // when the password text box has value && the flag is true(which means that we have words in confirmation password\n    // we compare\n    if (value.length !== 0) {\n      if (value.length < 5) {\n        callback(\"length should > 5\");\n      } else {\n        let oneDigit = true;\n        let oneCharacter = true;\n        for (let i = 0; i < value.length; i += 1) {\n          if (value.charAt(i) >= \"0\" && value.charAt(i) <= \"9\") {\n            oneDigit = false;\n          }\n          if (value.charAt(i) < \"0\" || value.charAt(i) > \"9\") {\n            oneCharacter = false;\n          }\n        }\n        if (oneDigit) {\n          callback(\"at least one number\");\n        }\n        if (oneCharacter) {\n          callback(\"Don't put all numbers\");\n        }\n        if (value && this.state.flag) {\n          form.validateFields([\"confirm\"], { force: true });\n        }\n      }\n    } else if (value && this.state.flag) {\n      form.validateFields([\"confirm\"], { force: true });\n    }\n    callback();\n  }\n\n  /* istanbul ignore next */\n  compareToFirstPassword(rule, value, callback) {\n    const { form } = this.props;\n    // when the confirmation password has value && the value is not equal to the password\n    if (value && value !== form.getFieldValue(\"password\")) {\n      callback(\"Please Enter the Same Passwords!\");\n    } else {\n      callback();\n    }\n  }\n\n  handleConfirmBlur(e) {\n    const { value } = e.target; // get confirmation password\n    const p = this.state.flag;\n    this.setState({ flag: p || !!value });\n  } // if the flag is true, flag is true, otherwise if confirmation password is not null, set the flag to true.\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n\n    const formItemLayout = {\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 8 },\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 16 },\n      },\n    };\n\n    return (\n      <div>\n        <header id=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <span className=\"AppTitle\" id=\"logox\">\n            {\" \"}\n            Video & Messaging Web App\n          </span>\n        </header>\n        <div id=\"RegisterDiv\">\n          <Form {...formItemLayout} className=\"RegisterForm\" id=\"RegisterForm\">\n            <Form.Item label=\"Username\">\n              {getFieldDecorator(\"username\", {\n                rules: [\n                  {\n                    required: true,\n                    message: \"Please input your Username!\",\n                  },\n                ],\n              })(<Input className=\"textbox\" />)}\n            </Form.Item>\n            <Form.Item label=\"Password\" hasFeedback>\n              {getFieldDecorator(\"password\", {\n                rules: [\n                  {\n                    required: true,\n                    message: \"Please input your password!\",\n                  },\n                  {\n                    validator: this.validateToNextPassword,\n                  },\n                ],\n              })(<Input.Password className=\"textbox\" />)}\n            </Form.Item>\n            <Form.Item label=\"Confirm Password\" hasFeedback>\n              {getFieldDecorator(\"confirm\", {\n                rules: [\n                  {\n                    required: true,\n                    message: \"Please confirm your password!\",\n                  },\n                  {\n                    validator: this.compareToFirstPassword,\n                  },\n                ],\n              })(\n                <Input.Password\n                  onBlur={this.handleConfirmBlur}\n                  className=\"textbox\"\n                />\n              )}\n            </Form.Item>\n            <Button\n              className=\"Button\"\n              color=\"secondary\"\n              variant=\"text\"\n              size=\"large\"\n              onClick={this.handleSubmit}\n            >\n              <span id=\"ResgisterSpan\">Register</span>\n            </Button>\n            <div id=\"JumpLinklogin\">\n              <span> I already have an account, </span>\n              <Link to=\"/login\" id=\"registerLink\">\n                {\" \"}\n                Go to Login\n              </Link>\n            </div>\n          </Form>\n        </div>\n      </div>\n    ); // when the mouse wont focus on the textbox, active handConfirmBlur\n  }\n}\nconst Register = Form.create({ name: \"register\" })(RegistrationForm);\nexport default Register;\n","/* eslint-disable react/prop-types */\n/* eslint-disable radix */\n/* eslint-disable jsx-a11y/label-has-associated-control */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable no-console */\nimport Button from \"@material-ui/core/Button\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n// import PropTypes from \"prop-types\";\nimport logo from \"../images/messenger.svg\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      // loginAttempt: 0,\n      // lockoutTime: undefined,\n      // lockoutArray: new Map(),\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n\n  /* istanbul ignore next */\n  // timer() {\n  //   setTimeout(() => {\n  //     window.top.location = \"https://project557.herokuapp.com/homepage\";\n  //   }, 2000);\n  // }\n  /* istanbul ignore next */\n  async handleSubmit(e) {\n    e.preventDefault();\n    // ]\n    if (this.state.username.length !== 0 && this.state.password.length !== 0) {\n      if (document.getElementById(\"loginErrorMessage\") !== null) {\n        document\n          .getElementById(\"loginErrorMessage\")\n          .setAttribute(\"style\", \"display: none;\");\n      }\n\n      // /// lockout/////////////////////////////////////////////////////////\n      if (localStorage.getItem(this.state.username) !== null) {\n        const arrayTemp = localStorage.getItem(this.state.username).split(\" \");\n        const loginAttempt = parseInt(arrayTemp[0]);\n        const lockoutTime = arrayTemp[1];\n\n        console.log(`loginAttempt = ${loginAttempt}`);\n        console.log(`lockoutTime = ${lockoutTime}`);\n        if (\n          loginAttempt >= 3 &&\n          lockoutTime !== \"undefined\" &&\n          (Date.now() - parseInt(lockoutTime)) / 1000 < 30\n        ) {\n          console.log(\"lockout in effect!\");\n          // document.getElementById(\"loginButton\").innerHTML = \"Lockout 30sec\";\n          return;\n        }\n      }\n      document.getElementById(\"loginButton\").innerHTML = \"Login\";\n\n      // /// lockout/////////////////////////////////////////////////////////\n\n      const requestOptions = {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          username: this.state.username,\n          password: this.state.password,\n        }),\n      };\n\n      await fetch(\"http://localhost:8080/login\", requestOptions)\n        .then((res) => {\n          res.json().then((temp) => {\n            console.log(temp);\n            this.props.handleLogin(\"token\", temp[0].username, temp[0].password);\n            const rd = `${\n              temp[0].regidate.split(\"T\")[0]\n            } ${temp[0].regidate.split(\"T\")[1].substr(0, 8)}`;\n            this.props.handleDate(rd);\n          });\n\n          if (res.status === 200) {\n            const loginMessage = document.createElement(\"p\");\n            loginMessage.innerHTML = \"Welcome back buddy!\";\n            loginMessage.setAttribute(\"id\", \"loginMessage\");\n            loginMessage.setAttribute(\"style\", \"color: green;\");\n            const login = document.getElementById(\"login\");\n            login.appendChild(loginMessage);\n\n            // /// lockout/////////////////////////////////////////////////////////\n            localStorage.setItem(this.state.username, `${0} undefined`);\n            // /// lockout/////////////////////////////////////////////////////////\n            // this.props.saveUserNameAndPassWord(this.state.username, this.state.password);\n\n            // setTimeout(() => {\n            //   window.top.location = \"http://localhost:3000/homepage\";\n            // }, 2000);\n\n            // document.getElementById(\"loginMessage\").remove();\n          } else {\n            let loginErrorMessage = null;\n            if (document.getElementById(\"loginErrorMessage\") === null) {\n              loginErrorMessage = document.createElement(\"p\");\n              loginErrorMessage.innerHTML =\n                \"Your username or password is incorrect\";\n              loginErrorMessage.setAttribute(\"id\", \"loginErrorMessage\");\n              loginErrorMessage.setAttribute(\"style\", \"color: red;\");\n              const login = document.getElementById(\"login\");\n              login.appendChild(loginErrorMessage);\n            } else {\n              document\n                .getElementById(\"loginErrorMessage\")\n                .setAttribute(\"style\", \"display: inline; color: red \");\n            }\n\n            /// lockout//////////////////////////////////////////////////////////////////\n            let loginAttemptTemp = 1;\n\n            if (localStorage.getItem(this.state.username) === null) {\n              localStorage.setItem(this.state.username, `${1} undefined`);\n              console.log(`${this.state.username} not in map`);\n            } else {\n              loginAttemptTemp =\n                parseInt(\n                  localStorage.getItem(this.state.username).split(\" \")[0]\n                ) + 1;\n\n              console.log(`A loginAttemptTemp = ${loginAttemptTemp}`);\n\n              if (loginAttemptTemp >= 3) {\n                const timeTemp = Date.now();\n                // localStorage.setItem(this.state.username, [loginAttemptTemp, timeTemp]);\n                localStorage.setItem(\n                  this.state.username,\n                  `${loginAttemptTemp} ${timeTemp}`\n                );\n\n                document.getElementById(\"loginButton\").innerHTML =\n                  \"Lockout 30sec\";\n              } else {\n                localStorage.setItem(\n                  this.state.username,\n                  `${loginAttemptTemp} undefined`\n                );\n              }\n            }\n            /// lockout//////////////////////////////////////////////////////////////////\n          }\n        })\n        .catch(() => {});\n    }\n  }\n\n  handleInputChange(e) {\n    e.preventDefault();\n    // console.log(e.target.value);\n    this.setState({ [e.target.name]: e.target.value });\n  }\n\n  render() {\n    const { username, password } = this.state;\n    return (\n      <div>\n        <header id=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <span className=\"AppTitle\" id=\"logox\">\n            {\" \"}\n            Video & Messaging Web App\n          </span>\n        </header>\n        <div id=\"RegisterDiv\" />\n        <div className=\"loginMain\">\n          <div className=\"login\" id=\"login\">\n            <div>\n              <label htmlFor=\"fname\">Username :</label>\n              <input\n                type=\"text\"\n                id=\"LoginUsername\"\n                className=\"loginEle\"\n                name=\"username\"\n                value={username}\n                onChange={this.handleInputChange}\n              />\n            </div>\n            <div>\n              <label htmlFor=\"fname\">Password :</label>\n\n              <input\n                type=\"password\"\n                id=\"loginPassword\"\n                className=\"loginEle\"\n                name=\"password\"\n                value={password}\n                onChange={this.handleInputChange}\n              />\n            </div>\n\n            <Button\n              onClick={this.handleSubmit}\n              type=\"button\"\n              id=\"loginButton\"\n              className=\"loginEle\"\n              color=\"primary\"\n              size=\"large\"\n            >\n              Login In\n            </Button>\n          </div>\n          <div id=\"JumpLink\">\n            <span> Or you could </span>\n            <Link to=\"/register\" id=\"loginLink\">\n              {\" \"}\n              register now!\n            </Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  // saveUserNameAndPassWord: PropTypes.func.isRequired,\n  // saveRegidate: PropTypes.func.isRequired,\n};\n\nexport default Login;\n","/* eslint-disable react/destructuring-assignment */\n/* eslint-disable no-console */\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n// import { Upload, Button, Icon } from \"antd\";\nimport { Button } from \"antd\";\nimport { Avatar } from \"@material-ui/core\";\n// import ReactDOM from \"react-dom\";\nimport \"antd/dist/antd.css\";\n// import ReactFileReader from \"react-file-reader\";\nimport NavigationBar from \"./NavigationBar\";\nimport {deleteUser, updatePassword} from \"./getData\";\n\nclass Profile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      passwordInput: \"\",\n      newPassword: \"\",\n      passwordConformation: \"\",\n      profileButtonDivStyle: \"inline\",\n      changePasswordDivStyle: \"none\",\n      passwordErrorMessageStyle: \"none\",\n      MatchErrorMessageStyle: \"none\",\n      lengthErrorMessageStyle: \"none\",\n      changeAvatorStyle: \"none\",\n      deactivateDivStyle: \"none\",\n      updatedPassword: \"\",\n      deactivatePassword: \"\",\n      profilePic:\n        \"https://i.pinimg.com/originals/57/82/2c/57822cd7a504b0d5ab8e0f6983a063de.jpg\",\n    };\n    this.handlechangePasswordButton = this.handlechangePasswordButton.bind(\n      this\n    );\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleSetPassWordSubmit = this.handleSetPassWordSubmit.bind(this);\n    this.hanfleImgUpload = this.hanfleImgUpload.bind(this);\n    this.handlechangeAvatarButton = this.handlechangeAvatarButton.bind(this);\n    this.handledeactivateAccountButton = this.handledeactivateAccountButton.bind(\n      this\n    );\n    this.finishAvatorButton = this.finishAvatorButton.bind(this);\n    this.handleDeactivateButton = this.handleDeactivateButton.bind(this);\n    this.handledeactivateAccountButton = this.handledeactivateAccountButton.bind(\n      this\n    );\n    this.handleDeactivateGoback = this.handleDeactivateGoback.bind(this);\n  }\n\n  componentDidMount() {\n    const changePasswordDiv = document.getElementById(\"changePasswordDiv\");\n    changePasswordDiv.setAttribute(\"style\", \"display:none\");\n    const { password } = this.props;\n    this.setState({ updatedPassword: password });\n    // need a fetch function to fetch data for profilePic\n  }\n\n  // ///////// Change Password Button ///////////////////////////\n  handleSetPassWordSubmit() {\n    const {\n      passwordInput,\n      newPassword,\n      passwordConformation,\n      updatedPassword,\n    } = this.state;\n\n    let digitFlag = false;\n    let charFlag = false;\n    let newPasswordCheck = false;\n    let passwordCheck = false;\n    let matchCheck = false;\n    this.setState({ passwordErrorMessageStyle: \"none\" });\n    this.setState({ MatchErrorMessageStyle: \"none\" });\n    this.setState({ lengthErrorMessageStyle: \"none\" });\n\n    if (newPassword.length < 5) {\n      this.setState({ lengthErrorMessageStyle: \"block\" });\n    } else {\n      for (let i = 0; i < newPassword.length; i += 1) {\n        if (newPassword.charAt(i) >= \"0\" && newPassword.charAt(i) <= \"9\") {\n          digitFlag = true;\n        }\n        if (newPassword.charAt(i) < \"0\" || newPassword.charAt(i) > \"9\") {\n          charFlag = true;\n        }\n      }\n      if (digitFlag && charFlag) {\n        this.setState({ lengthErrorMessageStyle: \"none\" });\n        newPasswordCheck = true;\n      } else {\n        this.setState({ lengthErrorMessageStyle: \"block\" });\n      }\n    }\n\n    if (newPassword !== passwordConformation) {\n      this.setState({ MatchErrorMessageStyle: \"block\" });\n    } else {\n      matchCheck = true;\n    }\n\n    if (updatedPassword !== passwordInput) {\n      this.setState({ passwordErrorMessageStyle: \"block\" });\n    } else {\n      passwordCheck = true;\n    }\n    if (passwordCheck && newPasswordCheck && matchCheck) {\n      console.log(\"ready to fetch need to update database\");\n      this.setState({ profileButtonDivStyle: \"block\" });\n      this.setState({ changePasswordDivStyle: \"none\" });\n      this.setState({ updatedPassword: newPassword });\n      console.log(\"updatedPassword:\", newPassword);\n\n      updatePassword(this.props.username, newPassword);\n      localStorage.setItem(\"password\", newPassword);\n    }\n  }\n\n  handlechangePasswordButton() {\n    this.setState({ profileButtonDivStyle: \"none\" });\n    this.setState({ changePasswordDivStyle: \"inline\" });\n  }\n\n  // ///////// Change Password Button ///////////////////////////\n\n  // ///////// Change Avatar Button ///////////////////////////\n  // eslint-disable-next-line class-methods-use-this\n  handlechangeAvatarButton() {\n    this.setState({ profileButtonDivStyle: \"none\" });\n    this.setState({ changeAvatorStyle: \"inline\" });\n  }\n\n  // ///////// Change Avatar Button ///////////////////////////\n\n  // ///////// Deactivate Account Button ///////////////////////////\n\n  // eslint-disable-next-line class-methods-use-this\n  handledeactivateAccountButton() {\n    this.setState({ profileButtonDivStyle: \"none\" });\n    this.setState({ deactivateDivStyle: \"inline\" });\n  }\n\n  handleDeactivateButton() {\n    const { updatedPassword, deactivatePassword } = this.state;\n    if (updatedPassword === deactivatePassword) {\n      // we need a fetch function here to delete user in the database\n      const ByeMessage = document.createElement(\"div\");\n      ByeMessage.innerHTML = \"Good Bye!\";\n      document.getElementById(\"Profile\").appendChild(ByeMessage);\n\n      deleteUser(this.props.username);\n\n      localStorage.removeItem(\"TOKEN_KEY\");\n      localStorage.removeItem(\"currentUser\");\n      localStorage.removeItem(\"password\");\n      localStorage.removeItem(\"date\");\n  \n      setTimeout(() => {\n        window.top.location = \"http://localhost:3000/login\";\n      }, 2000);\n\n    }\n  }\n  // ///////// Deactivate Account Button ///////////////////////////\n\n  handleInputChange(e) {\n    e.preventDefault();\n    console.log(e.target.value);\n    this.setState({ [e.target.name]: e.target.value });\n  }\n\n  handleDeactivateGoback() {\n    this.setState({ profileButtonDivStyle: \"inline\" });\n    this.setState({ deactivateDivStyle: \"none\" });\n  }\n\n  hanfleImgUpload(e) {\n    console.log(e.target.files);\n    if (e.target.files.length !== 0) {\n      if (e.target.files[0].size > 3800000) {\n        // eslint-disable-next-line no-alert\n        alert(\"File is too big!\");\n        e.target.value = \"\";\n      } else {\n        const reader = new FileReader();\n        // eslint-disable-next-line func-names\n        reader.onload = function () {\n          const img = new Image();\n          img.src = reader.result;\n          console.log(img.src);\n          this.setState({ profilePic: img.src });\n        }.bind(this);\n        reader.readAsDataURL(e.target.files[0]);\n      }\n    }\n  }\n\n  finishAvatorButton() {\n    this.setState({ profileButtonDivStyle: \"inline\" });\n    this.setState({ changeAvatorStyle: \"none\" });\n    // Need a fetch to post the state profilePic to dataBase\n  }\n\n  render() {\n    const { username, date } = this.props;\n    const {\n      profileButtonDivStyle,\n      changePasswordDivStyle,\n      passwordInput,\n      passwordErrorMessageStyle,\n      newPassword,\n      passwordConformation,\n      MatchErrorMessageStyle,\n      lengthErrorMessageStyle,\n      changeAvatorStyle,\n      deactivateDivStyle,\n      profilePic,\n      deactivatePassword,\n    } = this.state;\n    return (\n      <div id=\"Profile\">\n        <NavigationBar />\n        <div>\n          <Avatar id=\"avatarProfile\" src={profilePic} />\n        </div>\n        <h1>{username}</h1>\n        <h3>\n          Registration Date:\n          {date}\n        </h3>\n        <div id=\"profileButtonDiv\" style={{ display: profileButtonDivStyle }}>\n          <div>\n            <Button\n              className=\"profileButton\"\n              id=\"changeAvatarButton\"\n              onClick={this.handlechangeAvatarButton}\n            >\n              change avatar / profile picture\n            </Button>\n\n            <div>\n              {\" \"}\n              <Button\n                className=\"profileButton\"\n                id=\"changePasswordButton\"\n                onClick={this.handlechangePasswordButton}\n              >\n                Change password\n              </Button>\n            </div>\n\n            <div>\n              <Button\n                className=\"profileButton\"\n                id=\"deactivateAccountButton\"\n                onClick={this.handledeactivateAccountButton}\n              >\n                Deactivate the account\n              </Button>\n            </div>\n          </div>\n        </div>\n        <div style={{ display: deactivateDivStyle }}>\n          <input\n            type=\"password\"\n            id=\"loginPassword\"\n            className=\"loginEle\"\n            name=\"deactivatePassword\"\n            value={deactivatePassword}\n            onChange={this.handleInputChange}\n          />\n          <button\n            type=\"button\"\n            id=\"handleDeactivateButton\"\n            onClick={this.handleDeactivateButton}\n          >\n            Deactivate\n          </button>\n          <button type=\"submit\" onClick={this.handleDeactivateGoback}>\n            {\" \"}\n            Go back\n          </button>\n        </div>\n        <div style={{ display: changeAvatorStyle }}>\n          <input\n            type=\"file\"\n            name=\"attachments[0][uploaded_data]\"\n            onChange={this.hanfleImgUpload}\n            accept=\"image/png, image/jpeg\"\n          />\n          <button type=\"button\" onClick={this.finishAvatorButton}>\n            Finish\n          </button>\n        </div>\n        {/* <div>{changePasswordBlock}</div> */}\n        {/* changePassword Block will be hidden at first */}\n        <div id=\"changePasswordDiv\" style={{ display: changePasswordDivStyle }}>\n          <div>\n            <div>\n              <span>Orginal Password: </span>\n\n              <input\n                id=\"loginPassword\"\n                className=\"loginEle\"\n                name=\"passwordInput\"\n                value={passwordInput}\n                onChange={this.handleInputChange}\n              />\n              <div\n                style={{\n                  display: passwordErrorMessageStyle,\n                  color: \"red\",\n                }}\n              >\n                Your orginal password is incorrect\n              </div>\n            </div>\n\n            <div>\n              <span>New Password :</span>\n\n              <input\n                type=\"password\"\n                id=\"loginPassword\"\n                className=\"loginEle\"\n                name=\"newPassword\"\n                value={newPassword}\n                onChange={this.handleInputChange}\n              />\n            </div>\n\n            <div>\n              <span>Password Conformation:</span>\n\n              <input\n                type=\"password\"\n                id=\"loginPassword\"\n                className=\"loginEle\"\n                name=\"passwordConformation\"\n                value={passwordConformation}\n                onChange={this.handleInputChange}\n              />\n            </div>\n            <div\n              style={{\n                display: MatchErrorMessageStyle,\n                color: \"red\",\n              }}\n            >\n              passwords doesn&apos;t Match!\n            </div>\n            <div\n              style={{\n                display: lengthErrorMessageStyle,\n                color: \"red\",\n              }}\n            >\n              passwords length should be greater than 5 and should contain at\n              least a digit and a character\n            </div>\n\n            <Button\n              onClick={this.handleSetPassWordSubmit}\n              type=\"button\"\n              id=\"loginButton\"\n              className=\"loginEle\"\n              color=\"primary\"\n              size=\"small\"\n            >\n              Reset Password\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nProfile.propTypes = {\n  username: PropTypes.string.isRequired,\n  date: PropTypes.string.isRequired,\n  password: PropTypes.string.isRequired,\n};\n\nexport default Profile;\n","/* eslint-disable class-methods-use-this */\n/* eslint-disable camelcase */\n/* eslint-disable no-unused-vars */\n/* eslint-disable react/jsx-one-expression-per-line */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable no-console */\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n// import { Upload, Button, Icon } from \"antd\";\n// import { Button } from \"antd\";\nimport { Avatar } from \"@material-ui/core\";\n// import ReactDOM from \"react-dom\";\nimport \"antd/dist/antd.css\";\n// import ReactFileReader from \"react-file-reader\";\nimport NavigationBar from \"./NavigationBar\";\n\nimport { getAtUser } from \"./getData\";\n\nclass ProfileOther extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      profilePic: \"\",\n      username: \"\",\n      regidate: \"\",\n    };\n\n    this.handleGoBack = this.handleGoBack.bind(this);\n  }\n\n  componentDidMount() {\n    const urlArray = window.location.href.split(\"/\");\n    const atName = urlArray[urlArray.length - 1];\n\n    getAtUser(atName).then((res) => {\n      const otherProfile = res.map((obj) => {\n        const username_temp = obj.username;\n        const pic_temp = obj.picture;\n        const date_temp = obj.regidate.split(\"T\")[0];\n\n        this.setState({ username: username_temp });\n        this.setState({ regidate: date_temp });\n        this.setState({ profilePic: pic_temp });\n        return \"\";\n      });\n    });\n  }\n\n  handleGoBack() {\n    window.location = `http://localhost:3000/homepage`;\n  }\n\n  render() {\n    let { username, regidate, profilePic } = this.state;\n\n    if (username === \"\") {\n      username = \"This user doesn't exist!\";\n      regidate = \"Nothing here, please:\";\n      const nonexistPic = [\n        \"https://media.tenor.com/images/62238792a26f1957ee104fd17a54aaf8/tenor.gif\",\n        \"https://www.gannett-cdn.com/presto/2019/07/01/USAT/56586d90-810d-408d-88d2-6340354d3c0c-VPC_DOG_CONFUSED_BY_VR_DESK_THUMB.jpg?width=388&height=388&crop=1080,1080,x290,y0\",\n        \"https://steamuserimages-a.akamaihd.net/ugc/791992712493073080/9BF5EE311E5ED5B66350C0554262147CF3327D06/\",\n        \"https://i.pinimg.com/originals/2a/80/9b/2a809b94926506068601c0506b5ef85f.jpg\",\n        \"https://pbs.twimg.com/media/CDcyxK4WoAEPscs.jpg\",\n        \"https://media.tenor.com/images/1879002401ffe6821c57e0434f125e5a/tenor.gif\",\n      ];\n      const x = Math.floor(Math.random() * nonexistPic.length);\n      profilePic = nonexistPic[x];\n    } else {\n      regidate = `Registration Date: ${regidate}`;\n    }\n    return (\n      <div id=\"Profile\">\n        <NavigationBar />\n        <div>\n          <Avatar id=\"avatarProfile\" src={profilePic} />\n        </div>\n        <h1>{username}</h1>\n        <h3>{regidate}</h3>\n        <div>\n          <button type=\"submit\" onClick={this.handleGoBack}>\n            {\" \"}\n            Go back\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ProfileOther;\n","/* eslint-disable*/\n/* eslint-disable react/jsx-props-no-spreading */\nimport React, { Component } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport Register from \"./Register\";\nimport Login from \"./Login\";\nimport Home from \"./Home\";\nimport Profile from \"./Profile\";\nimport Story from \"./Story\";\nimport ProfileOther from \"./ProfileOther\";\nimport Videocall from \"./Videocall\";\n\n// import Chat from './Chat';\n\nclass Main extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n    // this.saveUserNameAndPassWordK = this.saveUserNameAndPassWordK.bind(this);\n    // this.saveRegidate = this.saveRegidate.bind(this);\n    this.getLogin = this.getLogin.bind(this);\n    this.getHome = this.getHome.bind(this);\n    this.getProfile = this.getProfile.bind(this);\n    this.getStory = this.getStory.bind(this);\n  }\n\n  getHome() {\n    if (this.props.loginStatus) {\n      return (\n        <Home\n          username={localStorage.getItem(\"currentUser\")}\n          password={localStorage.getItem(\"password\")}\n        />\n      );\n    } else {\n      return <Redirect to=\"/login\" />;\n    }\n  }\n\n  getLogin() {\n    console.log(this.props.loginStatus);\n    if (this.props.loginStatus) {\n      return <Redirect to=\"/homepage\" />;\n    } else {\n      return (\n        <Login\n          handleLogin={this.props.handleLogin}\n          handleDate={this.props.handleDate}\n        />\n      );\n    }\n  }\n  getProfile() {\n    if (Boolean(localStorage.getItem(\"TOKEN_KEY\"))) {\n      return (\n        <Profile\n          username={localStorage.getItem(\"currentUser\")}\n          password={localStorage.getItem(\"password\")}\n          date={localStorage.getItem(\"date\")}\n        />\n      );\n    } else {\n      return <Redirect to=\"/login\" />;\n    }\n  }\n  getStory() {\n    if (Boolean(localStorage.getItem(\"TOKEN_KEY\"))) {\n      console.log(this.props.username);\n      return <Story username={localStorage.getItem(\"currentUser\")} />;\n    } else {\n      return <Redirect to=\"/login\" />;\n    }\n  }\n\n  render() {\n    // Mocking //////////////\n    // user = \"Jack\";\n    // Password = \"12345\";\n    // regidate = \"11.1.2020\";\n\n    /// ///// Mocking /////////////////\n\n    return (\n      <div className=\"main\">\n        <Switch>\n          <Route path=\"/login\" component={this.getLogin} />\n          {/* <Route path=\"/register\" component={Register} /> */}\n          <Route path=\"/homepage\" component={this.getHome} />\n          <Route path=\"/profile\" component={this.getProfile} />\n          <Route path=\"/story\" component={this.getStory} />\n          <Route path=\"/ProfileOther\" component={ProfileOther} />\n          <Route\n            path=\"/videocall\"\n            render={() => (\n              <Videocall username={localStorage.getItem(\"currentUser\")} />\n            )}\n          />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default Main;\n","/* eslint-disable react/destructuring-assignment */\nimport React from \"react\";\nimport \"../style/App.css\";\nimport Main from \"./Main\";\n\nexport default class App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loginStatus: Boolean(localStorage.getItem(\"TOKEN_KEY\")),\n      username: \"\",\n      password: \"\",\n      registdate: \"\",\n    };\n    this.handleLogink = this.handleLogink.bind(this);\n    this.handleDate = this.handleDate.bind(this);\n  }\n\n  handleLogink(token1, username1, password1) {\n    // console.log(\"******\");\n    localStorage.setItem(\"TOKEN_KEY\", token1);\n    localStorage.setItem(\"currentUser\", username1);\n    localStorage.setItem(\"password\", password1);\n    // localStorage.setItem(\"TOKEN_KEY2\", token1);\n    this.setState({ loginStatus: true });\n    this.setState({ username: username1 });\n    this.setState({ password: password1 });\n  }\n\n  handleDate(date) {\n    localStorage.setItem(\"date\", date);\n    this.setState({ registdate: date });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Main\n          loginStatus={this.state.loginStatus}\n          handleLogin={this.handleLogink}\n          handleDate={this.handleDate}\n          username={this.state.username}\n          password={this.state.password}\n          registdate={this.state.registdate}\n        />\n      </div>\n    );\n  }\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport App from \"./components/App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\n/* istanbul ignore next */\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n/* istanbul ignore next */\nreportWebVitals();\n","/* eslint-disable jsx-a11y/control-has-associated-label */\n/* eslint-disable react/jsx-wrap-multilines */\nimport React, { Component } from \"react\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport List from \"@material-ui/core/List\";\nimport Divider from \"@material-ui/core/Divider\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { Link } from \"react-router-dom\";\n\nclass NavigationBar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  handleLogout() {\n    localStorage.removeItem(\"TOKEN_KEY\");\n    localStorage.removeItem(\"currentUser\");\n    localStorage.removeItem(\"password\");\n    localStorage.removeItem(\"date\");\n\n    setTimeout(() => {\n      window.top.location = \"http://localhost:3000/login\";\n    }, 1000);\n  }\n\n  render() {\n    return (\n      <div className=\"n\\NavigationBar\">\n        <CssBaseline />\n        <Drawer className=\"drawer\" variant=\"permanent\" anchor=\"left\">\n          <Divider />\n          <List>\n            <ListItem button key=\"People\">\n              <ListItemText primary={<Link to=\"/homepage\">People</Link>} />\n            </ListItem>\n          </List>\n          <List>\n            <ListItem button key=\"Story\">\n              <ListItemText primary={<Link to=\"/story\">Story</Link>} />\n            </ListItem>\n          </List>\n          <Divider />\n          <List>\n            <ListItem button key=\"Profile\">\n              <ListItemText primary={<Link to=\"/profile\">Profile</Link>} />\n            </ListItem>\n            <ListItem button key=\"Logout\">\n              <button type=\"submit\" onClick={this.handleLogout}>\n                Logout\n              </button>\n            </ListItem>\n          </List>\n        </Drawer>\n      </div>\n    );\n  }\n}\n\nexport default NavigationBar;\n","export default __webpack_public_path__ + \"static/media/messenger.f298aa90.svg\";"],"sourceRoot":""}